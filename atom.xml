<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>宋仁坤的博客</title>
  
  <subtitle>记学习笔记</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://blog.soroke.top/"/>
  <updated>2021-01-06T06:35:10.946Z</updated>
  <id>https://blog.soroke.top/</id>
  
  <author>
    <name>Soroke</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>git命令使用</title>
    <link href="https://blog.soroke.top/2021/01/06/git-command-use/"/>
    <id>https://blog.soroke.top/2021/01/06/git-command-use/</id>
    <published>2021-01-06T06:13:28.000Z</published>
    <updated>2021-01-06T06:35:10.946Z</updated>
    
    <content type="html"><![CDATA[<h1 id="git安装后配置"><a href="#git安装后配置" class="headerlink" title="git安装后配置"></a>git安装后配置</h1><h2 id="配置用户名和邮箱"><a href="#配置用户名和邮箱" class="headerlink" title="配置用户名和邮箱"></a>配置用户名和邮箱</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name &quot;user_test&quot;</span><br><span class="line">git config --global user.email &quot;user_test@user.test&quot;</span><br></pre></td></tr></table></figure><h2 id="远程推送问题和解决"><a href="#远程推送问题和解决" class="headerlink" title="远程推送问题和解决"></a>远程推送问题和解决</h2><h3 id="问题如下"><a href="#问题如下" class="headerlink" title="问题如下"></a>问题如下</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ssh: connect to host github.com port 22: Connection refused</span><br><span class="line">fatal: Could not read from remote repository.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Please make sure you have the correct access rights</span><br><span class="line">and the repository exists.</span><br></pre></td></tr></table></figure><h3 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">vim .ssh/config</span><br><span class="line"></span><br><span class="line">Host github.com</span><br><span class="line">User fulinux@sina.com</span><br><span class="line">Hostname ssh.github.com</span><br><span class="line">PreferredAuthentications publickey</span><br><span class="line">IdentityFile ~/.ssh/id_rsa</span><br><span class="line">Port 443</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="测试连接是否成功"><a href="#测试连接是否成功" class="headerlink" title="测试连接是否成功"></a>测试连接是否成功</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> ssh -T git@github.com</span></span><br><span class="line"></span><br><span class="line">Hi fulinux! You&#x27;ve successfully authenticated, but GitHub does not provide shell access.</span><br></pre></td></tr></table></figure><h1 id="git冲突处理"><a href="#git冲突处理" class="headerlink" title="git冲突处理"></a>git冲突处理</h1><h2 id="先将本地修改暂存"><a href="#先将本地修改暂存" class="headerlink" title="先将本地修改暂存"></a>先将本地修改暂存</h2><p>这样本地的所有修改就都被暂存起来，用 git stash list 可以看到保存的信息：其中 stash{0} 就是刚才保存的内容</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash</span><br></pre></td></tr></table></figure><h2 id="pull内容"><a href="#pull内容" class="headerlink" title="pull内容"></a>pull内容</h2><p>暂存了本地就可以愉快地pull了</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git pull</span><br></pre></td></tr></table></figure><h2 id="还原暂存的内容"><a href="#还原暂存的内容" class="headerlink" title="还原暂存的内容"></a>还原暂存的内容</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash pop stash@&#123;0&#125;</span><br></pre></td></tr></table></figure><h1 id="git-放弃本地修改"><a href="#git-放弃本地修改" class="headerlink" title="git 放弃本地修改"></a>git 放弃本地修改</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git checkout . #本地所有修改的。没有的提交的，都返回到原来的状态</span><br><span class="line">git stash #把所有没有提交的修改暂存到stash里面。可用git stash pop回复。</span><br><span class="line">git reset --hard HASH #返回到某个节点，不保留修改。</span><br><span class="line">git reset --soft HASH #返回到某个节点。保留修改</span><br><span class="line"></span><br><span class="line">git checkout . &amp;&amp; git clean -df  # 新增的文件需要删除</span><br></pre></td></tr></table></figure><h1 id="Git分支的使用"><a href="#Git分支的使用" class="headerlink" title="Git分支的使用"></a>Git分支的使用</h1><h2 id="远程仓库有master和dev分支"><a href="#远程仓库有master和dev分支" class="headerlink" title="远程仓库有master和dev分支"></a>远程仓库有master和dev分支</h2><h3 id="克隆代码"><a href="#克隆代码" class="headerlink" title="克隆代码"></a>克隆代码</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/master-dev.git</span><br><span class="line"><span class="meta">#</span><span class="bash"> 这个git路径是无效的，示例而已</span></span><br></pre></td></tr></table></figure><h3 id="查看所有分支"><a href="#查看所有分支" class="headerlink" title="查看所有分支"></a>查看所有分支</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git branch --all</span><br><span class="line"><span class="meta">#</span><span class="bash"> 默认有了dev和master分支，所以会看到如下三个分支</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> master[本地主分支] origin/master[远程主分支] origin/dev[远程开发分支]</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 新克隆下来的代码默认master和origin/master是关联的，也就是他们的代码保持同步</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 但是origin/dev分支在本地没有任何的关联，所以我们无法在那里开发</span></span><br></pre></td></tr></table></figure><h3 id="创建本地关联origin-dev的分支"><a href="#创建本地关联origin-dev的分支" class="headerlink" title="创建本地关联origin/dev的分支"></a>创建本地关联origin/dev的分支</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git checkout dev origin/dev</span><br><span class="line"><span class="meta">#</span><span class="bash"> 创建本地分支dev，并且和远程origin/dev分支关联，本地dev分支的初始代码和远程的dev分支代码一样</span></span><br></pre></td></tr></table></figure><h3 id="切换到dev分支进行开发"><a href="#切换到dev分支进行开发" class="headerlink" title="切换到dev分支进行开发"></a>切换到dev分支进行开发</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git checkout dev</span><br><span class="line"><span class="meta">#</span><span class="bash"> 这个是切换到dev分支，然后就是常规的开发</span></span><br></pre></td></tr></table></figure><h2 id="假设远程仓库只有mater分支"><a href="#假设远程仓库只有mater分支" class="headerlink" title="假设远程仓库只有mater分支"></a>假设远程仓库只有mater分支</h2><h3 id="创建本地新的dev分支"><a href="#创建本地新的dev分支" class="headerlink" title="创建本地新的dev分支"></a>创建本地新的dev分支</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git branch dev</span><br><span class="line"><span class="meta">#</span><span class="bash"> 创建本地分支 git branch</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看分支</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 这是会看到master和dev，而且master上会有一个星号</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 这个时候dev是一个本地分支，远程仓库不知道它的存在</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 本地分支可以不同步到远程仓库，我们可以在dev开发，然后merge到master，使用master同步代码，当然也可以同步</span></span><br></pre></td></tr></table></figure><h3 id="发布dev分支"><a href="#发布dev分支" class="headerlink" title="发布dev分支"></a>发布dev分支</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push origin dev:dev # 这样远程仓库也有一个dev分支了</span><br></pre></td></tr></table></figure><h3 id="在dev分支开发代码"><a href="#在dev分支开发代码" class="headerlink" title="在dev分支开发代码"></a>在dev分支开发代码</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">git checkout dev # 切换到dev分支进行开发</span><br><span class="line"><span class="meta">#</span><span class="bash"> 开发代码之后，我们有两个选择</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 第一个：如果功能开发完成了，可以合并主分支</span></span><br><span class="line">git checkout master # 切换到主分支</span><br><span class="line">git merge dev # 把dev分支的更改和master合并</span><br><span class="line">git push # 提交主分支代码远程</span><br><span class="line">git checkout dev # 切换到dev远程分支</span><br><span class="line">git push # 提交dev分支到远程</span><br><span class="line"><span class="meta">#</span><span class="bash"> 第二个：如果功能没有完成，可以直接推送</span></span><br><span class="line">git push # 提交到dev远程分支</span><br><span class="line"><span class="meta">#</span><span class="bash"> 注意：在分支切换之前最好先commit全部的改变，除非你真的知道自己在做什么</span></span><br></pre></td></tr></table></figure><h3 id="删除分支"><a href="#删除分支" class="headerlink" title="删除分支"></a>删除分支</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git push origin :dev # 删除远程dev分支，危险命令哦</span><br><span class="line"><span class="meta">#</span><span class="bash"> 下面两条是删除本地分支</span></span><br><span class="line">git checkout master # 切换到master分支</span><br><span class="line">git branch -d dev # 删除本地dev分支</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;git安装后配置&quot;&gt;&lt;a href=&quot;#git安装后配置&quot; class=&quot;headerlink&quot; title=&quot;git安装后配置&quot;&gt;&lt;/a&gt;git安装后配置&lt;/h1&gt;&lt;h2 id=&quot;配置用户名和邮箱&quot;&gt;&lt;a href=&quot;#配置用户名和邮箱&quot; class=&quot;headerlink&quot; title=&quot;配置用户名和邮箱&quot;&gt;&lt;/a&gt;配置用户名和邮箱&lt;/h2&gt;&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;git config --global user.name &amp;quot;user_test&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git config --global user.email &amp;quot;user_test@user.test&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;远程推送问题和解决&quot;&gt;&lt;a href=&quot;#远程推送问题和解决&quot; class=&quot;headerlink&quot; title=&quot;远程推送问题和解决&quot;&gt;&lt;/a&gt;远程推送问题和解决&lt;/h2&gt;&lt;h3 id=&quot;问题如下&quot;&gt;&lt;a href=&quot;#问题如下&quot; class=&quot;headerlink&quot; title=&quot;问题如下&quot;&gt;&lt;/a&gt;问题如下&lt;/h3&gt;&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;ssh: connect to host github.com port 22: Connection refused&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;fatal: Could not read from remote repository.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Please make sure you have the correct access rights&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;and the repository exists.&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;解决方法&quot;&gt;&lt;a href=&quot;#解决方法&quot; class=&quot;headerlink&quot; title=&quot;解决方法&quot;&gt;&lt;/a&gt;解决方法&lt;/h3&gt;&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;vim .ssh/config&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Host github.com&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;User fulinux@sina.com&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Hostname ssh.github.com&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;PreferredAuthentications publickey&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;IdentityFile ~/.ssh/id_rsa&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Port 443&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="git" scheme="https://blog.soroke.top/categories/git/"/>
    
    
      <category term="github" scheme="https://blog.soroke.top/tags/github/"/>
    
      <category term="gitlab" scheme="https://blog.soroke.top/tags/gitlab/"/>
    
  </entry>
  
  <entry>
    <title>Ubuntu Server 16.04 LTS 安装 postgresql10</title>
    <link href="https://blog.soroke.top/2021/01/06/Ubuntu-Server-16-04-LTS-install-postgresql10/"/>
    <id>https://blog.soroke.top/2021/01/06/Ubuntu-Server-16-04-LTS-install-postgresql10/</id>
    <published>2021-01-06T06:01:28.000Z</published>
    <updated>2021-01-06T06:34:38.707Z</updated>
    
    <content type="html"><![CDATA[<h1 id="添加密匙"><a href="#添加密匙" class="headerlink" title="添加密匙"></a>添加密匙</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -q -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -</span><br></pre></td></tr></table></figure><h1 id="添加安装源"><a href="#添加安装源" class="headerlink" title="添加安装源"></a>添加安装源</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo sh -c &#x27;echo &quot;deb http://apt.postgresql.org/pub/repos/apt/ $(lsb_release -cs)-pgdg main&quot; &gt; /etc/apt/sources.list.d/pgdg.list&#x27;</span><br></pre></td></tr></table></figure><h1 id="更新apt"><a href="#更新apt" class="headerlink" title="更新apt"></a>更新apt</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt update</span><br></pre></td></tr></table></figure><a id="more"></a><h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br></pre></td><td class="code"><pre><span class="line">lwk@qwfys ~ $ apt install postgresql-10 -y</span><br><span class="line">Reading package lists... Done</span><br><span class="line">Building dependency tree       </span><br><span class="line">Reading state information... Done</span><br><span class="line">The following packages were automatically installed and are no longer required:</span><br><span class="line">  bbswitch-dkms lib32gcc1 libc6-i386 libjansson4 libvdpau1 libxnvctrl0 screen-resolution-extra xserver-xorg-legacy</span><br><span class="line">Use &#x27;sudo apt autoremove&#x27; to remove them.</span><br><span class="line">The following additional packages will be installed:</span><br><span class="line">  libjs-underscore libpq5 libwxbase3.0-0v5 libwxgtk3.0-0v5 pgadmin3-data pgdg-keyring postgresql-client-10 postgresql-client-common postgresql-common</span><br><span class="line">Suggested packages:</span><br><span class="line">  javascript-common postgresql-contrib locales-all postgresql-doc-10 libjson-perl</span><br><span class="line">Recommended packages:</span><br><span class="line">  pgagent sysstat</span><br><span class="line">The following NEW packages will be installed:</span><br><span class="line">  libjs-underscore libwxbase3.0-0v5 libwxgtk3.0-0v5 pgadmin3 pgadmin3-data pgdg-keyring postgresql-10 postgresql-client-10 postgresql-client-common postgresql-common</span><br><span class="line">The following packages will be upgraded:</span><br><span class="line">  libpq5</span><br><span class="line">1 upgraded, 10 newly installed, 0 to remove and 1 not upgraded.</span><br><span class="line">Need to get 17.3 MB of archives.</span><br><span class="line">After this operation, 70.0 MB of additional disk space will be used.</span><br><span class="line">Get:1 http://mirrors.ustc.edu.cn/ubuntu xenial/main amd64 libjs-underscore all 1.7.0~dfsg-1ubuntu1 [46.7 kB]</span><br><span class="line">Get:2 http://mirrors.ustc.edu.cn/ubuntu xenial-updates/universe amd64 libwxbase3.0-0v5 amd64 3.0.2+dfsg-1.3ubuntu0.1 [971 kB]</span><br><span class="line">Get:3 http://mirrors.ustc.edu.cn/ubuntu xenial-updates/universe amd64 libwxgtk3.0-0v5 amd64 3.0.2+dfsg-1.3ubuntu0.1 [4,344 kB]</span><br><span class="line">Get:4 http://apt.postgresql.org/pub/repos/apt xenial-pgdg/main amd64 libpq5 amd64 10.1-1.pgdg16.04+1 [157 kB]</span><br><span class="line">Get:5 http://apt.postgresql.org/pub/repos/apt xenial-pgdg/main amd64 pgadmin3-data all 1.22.2-2.pgdg16.04+1 [2,516 kB]</span><br><span class="line">Get:6 http://apt.postgresql.org/pub/repos/apt xenial-pgdg/main amd64 pgadmin3 amd64 1.22.2-2.pgdg16.04+1 [3,067 kB]                                                                                                                          </span><br><span class="line">Get:7 http://apt.postgresql.org/pub/repos/apt xenial-pgdg/main amd64 pgdg-keyring all 2017.3 [10.3 kB]                                                                                                                                       </span><br><span class="line">Get:8 http://apt.postgresql.org/pub/repos/apt xenial-pgdg/main amd64 postgresql-client-common all 188.pgdg16.04+1 [81.5 kB]                                                                                                                  </span><br><span class="line">Get:9 http://apt.postgresql.org/pub/repos/apt xenial-pgdg/main amd64 postgresql-client-10 amd64 10.1-1.pgdg16.04+1 [1,277 kB]                                                                                                                </span><br><span class="line">Get:10 http://apt.postgresql.org/pub/repos/apt xenial-pgdg/main amd64 postgresql-common all 188.pgdg16.04+1 [220 kB]                                                                                                                         </span><br><span class="line">Get:11 http://apt.postgresql.org/pub/repos/apt xenial-pgdg/main amd64 postgresql-10 amd64 10.1-1.pgdg16.04+1 [4,635 kB]                                                                                                                      </span><br><span class="line">Fetched 17.3 MB in 6min 12s (46.5 kB/s)                                                                                                                                                                                                      </span><br><span class="line">Preconfiguring packages ...</span><br><span class="line">Selecting previously unselected package libjs-underscore.</span><br><span class="line">(Reading database ... 210818 files and directories currently installed.)</span><br><span class="line">Preparing to unpack .../libjs-underscore_1.7.0~dfsg-1ubuntu1_all.deb ...</span><br><span class="line">Unpacking libjs-underscore (1.7.0~dfsg-1ubuntu1) ...</span><br><span class="line">Preparing to unpack .../libpq5_10.1-1.pgdg16.04+1_amd64.deb ...</span><br><span class="line">Unpacking libpq5:amd64 (10.1-1.pgdg16.04+1) over (9.5.10-0ubuntu0.16.04) ...</span><br><span class="line">Selecting previously unselected package libwxbase3.0-0v5:amd64.</span><br><span class="line">Preparing to unpack .../libwxbase3.0-0v5_3.0.2+dfsg-1.3ubuntu0.1_amd64.deb ...</span><br><span class="line">Unpacking libwxbase3.0-0v5:amd64 (3.0.2+dfsg-1.3ubuntu0.1) ...</span><br><span class="line">Selecting previously unselected package libwxgtk3.0-0v5:amd64.</span><br><span class="line">Preparing to unpack .../libwxgtk3.0-0v5_3.0.2+dfsg-1.3ubuntu0.1_amd64.deb ...</span><br><span class="line">Unpacking libwxgtk3.0-0v5:amd64 (3.0.2+dfsg-1.3ubuntu0.1) ...</span><br><span class="line">Selecting previously unselected package pgadmin3-data.</span><br><span class="line">Preparing to unpack .../pgadmin3-data_1.22.2-2.pgdg16.04+1_all.deb ...</span><br><span class="line">Unpacking pgadmin3-data (1.22.2-2.pgdg16.04+1) ...</span><br><span class="line">Selecting previously unselected package pgadmin3.</span><br><span class="line">Preparing to unpack .../pgadmin3_1.22.2-2.pgdg16.04+1_amd64.deb ...</span><br><span class="line">Unpacking pgadmin3 (1.22.2-2.pgdg16.04+1) ...</span><br><span class="line">Selecting previously unselected package pgdg-keyring.</span><br><span class="line">Preparing to unpack .../pgdg-keyring_2017.3_all.deb ...</span><br><span class="line">Unpacking pgdg-keyring (2017.3) ...</span><br><span class="line">Selecting previously unselected package postgresql-client-common.</span><br><span class="line">Preparing to unpack .../postgresql-client-common_188.pgdg16.04+1_all.deb ...</span><br><span class="line">Unpacking postgresql-client-common (188.pgdg16.04+1) ...</span><br><span class="line">Selecting previously unselected package postgresql-client-10.</span><br><span class="line">Preparing to unpack .../postgresql-client-10_10.1-1.pgdg16.04+1_amd64.deb ...</span><br><span class="line">Unpacking postgresql-client-10 (10.1-1.pgdg16.04+1) ...</span><br><span class="line">Selecting previously unselected package postgresql-common.</span><br><span class="line">Preparing to unpack .../postgresql-common_188.pgdg16.04+1_all.deb ...</span><br><span class="line">Adding &#x27;diversion of /usr/bin/pg_config to /usr/bin/pg_config.libpq-dev by postgresql-common&#x27;</span><br><span class="line">Unpacking postgresql-common (188.pgdg16.04+1) ...</span><br><span class="line">Selecting previously unselected package postgresql-10.</span><br><span class="line">Preparing to unpack .../postgresql-10_10.1-1.pgdg16.04+1_amd64.deb ...</span><br><span class="line">Unpacking postgresql-10 (10.1-1.pgdg16.04+1) ...</span><br><span class="line">Processing triggers for libc-bin (2.23-0ubuntu9) ...</span><br><span class="line">Processing triggers for doc-base (0.10.7) ...</span><br><span class="line">Processing 1 added doc-base file...</span><br><span class="line">Registering documents with scrollkeeper...</span><br><span class="line">Processing triggers for gnome-menus (3.13.3-6ubuntu3.1) ...</span><br><span class="line">Processing triggers for desktop-file-utils (0.22+linuxmint1) ...</span><br><span class="line">Processing triggers for mime-support (3.59ubuntu1) ...</span><br><span class="line">Processing triggers for man-db (2.7.5-1) ...</span><br><span class="line">Processing triggers for systemd (229-4ubuntu21) ...</span><br><span class="line">Processing triggers for ureadahead (0.100.0-19) ...</span><br><span class="line">ureadahead will be reprofiled on next reboot</span><br><span class="line">Setting up libjs-underscore (1.7.0~dfsg-1ubuntu1) ...</span><br><span class="line">Setting up libpq5:amd64 (10.1-1.pgdg16.04+1) ...</span><br><span class="line">Setting up libwxbase3.0-0v5:amd64 (3.0.2+dfsg-1.3ubuntu0.1) ...</span><br><span class="line">Setting up libwxgtk3.0-0v5:amd64 (3.0.2+dfsg-1.3ubuntu0.1) ...</span><br><span class="line">Setting up pgadmin3-data (1.22.2-2.pgdg16.04+1) ...</span><br><span class="line">Setting up pgadmin3 (1.22.2-2.pgdg16.04+1) ...</span><br><span class="line">Setting up pgdg-keyring (2017.3) ...</span><br><span class="line">Removing apt.postgresql.org key from trusted.gpg: OK</span><br><span class="line">Setting up postgresql-client-common (188.pgdg16.04+1) ...</span><br><span class="line">Setting up postgresql-client-10 (10.1-1.pgdg16.04+1) ...</span><br><span class="line">update-alternatives: using /usr/share/postgresql/10/man/man1/psql.1.gz to provide /usr/share/man/man1/psql.1.gz (psql.1.gz) in auto mode</span><br><span class="line">Setting up postgresql-common (188.pgdg16.04+1) ...</span><br><span class="line">Adding user postgres to group ssl-cert</span><br><span class="line"></span><br><span class="line">Creating config file /etc/postgresql-common/createcluster.conf with new version</span><br><span class="line">Building PostgreSQL dictionaries from installed myspell/hunspell packages...</span><br><span class="line">  en_us</span><br><span class="line">Removing obsolete dictionary files:</span><br><span class="line">Setting up postgresql-10 (10.1-1.pgdg16.04+1) ...</span><br><span class="line">Unescaped left brace in regex is deprecated, passed through in regex; marked by &lt;-- HERE in m/(?&lt;!\\)\$&#123; &lt;-- HERE ([^&#125;]+)&#125;/ at /usr/sbin/pam_getenv line 78.</span><br><span class="line">Unescaped left brace in regex is deprecated, passed through in regex; marked by &lt;-- HERE in m/(?&lt;!\\)\$&#123; &lt;-- HERE ([^&#125;]+)&#125;/ at /usr/sbin/pam_getenv line 78.</span><br><span class="line">Unescaped left brace in regex is deprecated, passed through in regex; marked by &lt;-- HERE in m/(?&lt;!\\)\$&#123; &lt;-- HERE ([^&#125;]+)&#125;/ at /usr/sbin/pam_getenv line 78.</span><br><span class="line">Unescaped left brace in regex is deprecated, passed through in regex; marked by &lt;-- HERE in m/(?&lt;!\\)\$&#123; &lt;-- HERE ([^&#125;]+)&#125;/ at /usr/sbin/pam_getenv line 78.</span><br><span class="line">Unescaped left brace in regex is deprecated, passed through in regex; marked by &lt;-- HERE in m/(?&lt;!\\)\$&#123; &lt;-- HERE ([^&#125;]+)&#125;/ at /usr/sbin/pam_getenv line 78.</span><br><span class="line">Unescaped left brace in regex is deprecated, passed through in regex; marked by &lt;-- HERE in m/(?&lt;!\\)\$&#123; &lt;-- HERE ([^&#125;]+)&#125;/ at /usr/sbin/pam_getenv line 78.</span><br><span class="line">Unescaped left brace in regex is deprecated, passed through in regex; marked by &lt;-- HERE in m/(?&lt;!\\)\$&#123; &lt;-- HERE ([^&#125;]+)&#125;/ at /usr/sbin/pam_getenv line 78.</span><br><span class="line">Unescaped left brace in regex is deprecated, passed through in regex; marked by &lt;-- HERE in m/(?&lt;!\\)\$&#123; &lt;-- HERE ([^&#125;]+)&#125;/ at /usr/sbin/pam_getenv line 78.</span><br><span class="line">Unescaped left brace in regex is deprecated, passed through in regex; marked by &lt;-- HERE in m/(?&lt;!\\)\$&#123; &lt;-- HERE ([^&#125;]+)&#125;/ at /usr/sbin/pam_getenv line 78.</span><br><span class="line">Unescaped left brace in regex is deprecated, passed through in regex; marked by &lt;-- HERE in m/(?&lt;!\\)\$&#123; &lt;-- HERE ([^&#125;]+)&#125;/ at /usr/sbin/pam_getenv line 78.</span><br><span class="line">Unescaped left brace in regex is deprecated, passed through in regex; marked by &lt;-- HERE in m/(?&lt;!\\)\$&#123; &lt;-- HERE ([^&#125;]+)&#125;/ at /usr/sbin/pam_getenv line 78.</span><br><span class="line">Unescaped left brace in regex is deprecated, passed through in regex; marked by &lt;-- HERE in m/(?&lt;!\\)\$&#123; &lt;-- HERE ([^&#125;]+)&#125;/ at /usr/sbin/pam_getenv line 78.</span><br><span class="line">Unescaped left brace in regex is deprecated, passed through in regex; marked by &lt;-- HERE in m/(?&lt;!\\)\$&#123; &lt;-- HERE ([^&#125;]+)&#125;/ at /usr/sbin/pam_getenv line 78.</span><br><span class="line">Unescaped left brace in regex is deprecated, passed through in regex; marked by &lt;-- HERE in m/(?&lt;!\\)\$&#123; &lt;-- HERE ([^&#125;]+)&#125;/ at /usr/sbin/pam_getenv line 78.</span><br><span class="line">Unescaped left brace in regex is deprecated, passed through in regex; marked by &lt;-- HERE in m/(?&lt;!\\)\$&#123; &lt;-- HERE ([^&#125;]+)&#125;/ at /usr/sbin/pam_getenv line 78.</span><br><span class="line">Creating new PostgreSQL cluster 10/main ...</span><br><span class="line">/usr/lib/postgresql/10/bin/initdb -D /var/lib/postgresql/10/main --auth-local peer --auth-host md5</span><br><span class="line">The files belonging to this database system will be owned by user &quot;postgres&quot;.</span><br><span class="line">This user must also own the server process.</span><br><span class="line"></span><br><span class="line">The database cluster will be initialized with locales</span><br><span class="line">  COLLATE:  en_US.UTF-8</span><br><span class="line">  CTYPE:    en_US.UTF-8</span><br><span class="line">  MESSAGES: en_US.UTF-8</span><br><span class="line">  MONETARY: zh_CN.UTF-8</span><br><span class="line">  NUMERIC:  zh_CN.UTF-8</span><br><span class="line">  TIME:     en_US.UTF-8</span><br><span class="line">The default database encoding has accordingly been set to &quot;UTF8&quot;.</span><br><span class="line">The default text search configuration will be set to &quot;english&quot;.</span><br><span class="line"></span><br><span class="line">Data page checksums are disabled.</span><br><span class="line"></span><br><span class="line">fixing permissions on existing directory /var/lib/postgresql/10/main ... ok</span><br><span class="line">creating subdirectories ... ok</span><br><span class="line">selecting default max_connections ... 100</span><br><span class="line">selecting default shared_buffers ... 128MB</span><br><span class="line">selecting dynamic shared memory implementation ... posix</span><br><span class="line">creating configuration files ... ok</span><br><span class="line">running bootstrap script ... ok</span><br><span class="line">performing post-bootstrap initialization ... ok</span><br><span class="line">syncing data to disk ... ok</span><br><span class="line"></span><br><span class="line">Success. You can now start the database server using:</span><br><span class="line"></span><br><span class="line">    /usr/lib/postgresql/10/bin/pg_ctl -D /var/lib/postgresql/10/main -l logfile start</span><br><span class="line"></span><br><span class="line">Ver Cluster Port Status Owner    Data directory              Log file</span><br><span class="line">10  main    5432 down   postgres /var/lib/postgresql/10/main /var/log/postgresql/postgresql-10-main.log</span><br><span class="line">update-alternatives: using /usr/share/postgresql/10/man/man1/postmaster.1.gz to provide /usr/share/man/man1/postmaster.1.gz (postmaster.1.gz) in auto mode</span><br><span class="line">Processing triggers for libc-bin (2.23-0ubuntu9) ...</span><br><span class="line">Processing triggers for systemd (229-4ubuntu21) ...</span><br><span class="line">Processing triggers for ureadahead (0.100.0-19) ...</span><br></pre></td></tr></table></figure><h1 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h1><h3 id="启动-关闭-重启"><a href="#启动-关闭-重启" class="headerlink" title="启动|关闭|重启"></a>启动|关闭|重启</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/etc/init.d/postgresql start|stop|restart</span><br></pre></td></tr></table></figure><h3 id="使用postgres用户登录到数据库"><a href="#使用postgres用户登录到数据库" class="headerlink" title="使用postgres用户登录到数据库"></a>使用postgres用户登录到数据库</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo -u postgres psql</span><br></pre></td></tr></table></figure><h3 id="切换数据库"><a href="#切换数据库" class="headerlink" title="切换数据库"></a>切换数据库</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\c dbname   --dbanme是数据库名称</span><br></pre></td></tr></table></figure><h3 id="查看数据库所有者"><a href="#查看数据库所有者" class="headerlink" title="查看数据库所有者"></a>查看数据库所有者</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\l</span><br></pre></td></tr></table></figure><h3 id="查看所有用户的角色"><a href="#查看所有用户的角色" class="headerlink" title="查看所有用户的角色"></a>查看所有用户的角色</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\du</span><br></pre></td></tr></table></figure><h3 id="创建用户"><a href="#创建用户" class="headerlink" title="创建用户"></a>创建用户</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create user username with password &#x27;***&#x27;;    --username用户名，***用户密码</span><br></pre></td></tr></table></figure><h3 id="创建数据库并指定所有者"><a href="#创建数据库并指定所有者" class="headerlink" title="创建数据库并指定所有者"></a>创建数据库并指定所有者</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create database dbname owner username;    --dbname数据库名，username用户名</span><br></pre></td></tr></table></figure><h3 id="更改数据库的所有者"><a href="#更改数据库的所有者" class="headerlink" title="更改数据库的所有者"></a>更改数据库的所有者</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grant all on database dbname to username;   --dbname 数据库名称，username用户名称</span><br></pre></td></tr></table></figure><h1 id="为数据库创建只读用户"><a href="#为数据库创建只读用户" class="headerlink" title="为数据库创建只读用户"></a>为数据库创建只读用户</h1><h3 id="创建只读用户dev"><a href="#创建只读用户dev" class="headerlink" title="创建只读用户dev"></a>创建只读用户dev</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CREATE USER dev WITH ENCRYPTED PASSWORD &#x27;****&#x27;;</span><br></pre></td></tr></table></figure><h3 id="设置dev默认事务为只读"><a href="#设置dev默认事务为只读" class="headerlink" title="设置dev默认事务为只读"></a>设置dev默认事务为只读</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter user dev set default_transaction_read_only=on;</span><br></pre></td></tr></table></figure><h3 id="赋予用户dev连接指定数据库bot的权限"><a href="#赋予用户dev连接指定数据库bot的权限" class="headerlink" title="赋予用户dev连接指定数据库bot的权限"></a>赋予用户dev连接指定数据库bot的权限</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grant connect on database bot to dev;</span><br></pre></td></tr></table></figure><h3 id="切换到数据库bot"><a href="#切换到数据库bot" class="headerlink" title="切换到数据库bot"></a>切换到数据库bot</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\c bot</span><br></pre></td></tr></table></figure><h3 id="把数据库bot所有在public这个schema下的所有表的使用权授予dev用户"><a href="#把数据库bot所有在public这个schema下的所有表的使用权授予dev用户" class="headerlink" title="把数据库bot所有在public这个schema下的所有表的使用权授予dev用户"></a>把数据库bot所有在public这个schema下的所有表的使用权授予dev用户</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grant usage on schema public to dev;</span><br></pre></td></tr></table></figure><h3 id="将之后新建在public这个schema下的所有表的使用权授予dev用户"><a href="#将之后新建在public这个schema下的所有表的使用权授予dev用户" class="headerlink" title="将之后新建在public这个schema下的所有表的使用权授予dev用户"></a>将之后新建在public这个schema下的所有表的使用权授予dev用户</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter default privileges in schema public grant select on tables to dev;</span><br></pre></td></tr></table></figure><h3 id="赋予用户dev所有public下的序列查询权限"><a href="#赋予用户dev所有public下的序列查询权限" class="headerlink" title="赋予用户dev所有public下的序列查询权限"></a>赋予用户dev所有public下的序列查询权限</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grant usage on all sequences in schema public to dev;</span><br></pre></td></tr></table></figure><h3 id="赋予用户dev所有public下表的select权限"><a href="#赋予用户dev所有public下表的select权限" class="headerlink" title="赋予用户dev所有public下表的select权限"></a>赋予用户dev所有public下表的select权限</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grant select on all tables in schema public to dev;</span><br></pre></td></tr></table></figure><h1 id="数据库重新导入表后的授权"><a href="#数据库重新导入表后的授权" class="headerlink" title="数据库重新导入表后的授权"></a>数据库重新导入表后的授权</h1><h3 id="使用postgres用户登录到数据库-1"><a href="#使用postgres用户登录到数据库-1" class="headerlink" title="使用postgres用户登录到数据库"></a>使用postgres用户登录到数据库</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo -u postgres psql</span><br></pre></td></tr></table></figure><h3 id="更改数据库bot的所有者为bot用户"><a href="#更改数据库bot的所有者为bot用户" class="headerlink" title="更改数据库bot的所有者为bot用户"></a>更改数据库bot的所有者为bot用户</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grant all on database bot to bot;   --dbname 数据库名称，username用户名称</span><br></pre></td></tr></table></figure><h3 id="赋予用户bot连接指定数据库bot的权限"><a href="#赋予用户bot连接指定数据库bot的权限" class="headerlink" title="赋予用户bot连接指定数据库bot的权限"></a>赋予用户bot连接指定数据库bot的权限</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grant connect on database bot to bot;</span><br></pre></td></tr></table></figure><h3 id="赋予用户dev连接指定数据库bot的权限-1"><a href="#赋予用户dev连接指定数据库bot的权限-1" class="headerlink" title="赋予用户dev连接指定数据库bot的权限"></a>赋予用户dev连接指定数据库bot的权限</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grant connect on database bot to dev;</span><br></pre></td></tr></table></figure><h3 id="切换到数据库bot-1"><a href="#切换到数据库bot-1" class="headerlink" title="切换到数据库bot"></a>切换到数据库bot</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\c bot</span><br></pre></td></tr></table></figure><h3 id="把数据库bot所有在public这个schema下的所有表的使用权授予bot用户"><a href="#把数据库bot所有在public这个schema下的所有表的使用权授予bot用户" class="headerlink" title="把数据库bot所有在public这个schema下的所有表的使用权授予bot用户"></a>把数据库bot所有在public这个schema下的所有表的使用权授予bot用户</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grant usage on schema public to bot;</span><br></pre></td></tr></table></figure><h3 id="赋予用户bot所有public下的所有权限"><a href="#赋予用户bot所有public下的所有权限" class="headerlink" title="赋予用户bot所有public下的所有权限"></a>赋予用户bot所有public下的所有权限</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grant usage on all sequences in schema public to bot;</span><br></pre></td></tr></table></figure><h3 id="赋予用户bot所有public下表的所有权限"><a href="#赋予用户bot所有public下表的所有权限" class="headerlink" title="赋予用户bot所有public下表的所有权限"></a>赋予用户bot所有public下表的所有权限</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grant all on all tables in schema public to bot;</span><br></pre></td></tr></table></figure><h3 id="把数据库bot所有在public这个schema下的所有表的使用权授予dev用户-1"><a href="#把数据库bot所有在public这个schema下的所有表的使用权授予dev用户-1" class="headerlink" title="把数据库bot所有在public这个schema下的所有表的使用权授予dev用户"></a>把数据库bot所有在public这个schema下的所有表的使用权授予dev用户</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grant usage on schema public to dev;</span><br></pre></td></tr></table></figure><h3 id="将之后新建在public这个schema下的所有表的使用权授予dev用户-1"><a href="#将之后新建在public这个schema下的所有表的使用权授予dev用户-1" class="headerlink" title="将之后新建在public这个schema下的所有表的使用权授予dev用户"></a>将之后新建在public这个schema下的所有表的使用权授予dev用户</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter defaule privileges in schema public grant  select on tables to dev;</span><br></pre></td></tr></table></figure><h3 id="赋予用户dev所有public下的序列查询权限-1"><a href="#赋予用户dev所有public下的序列查询权限-1" class="headerlink" title="赋予用户dev所有public下的序列查询权限"></a>赋予用户dev所有public下的序列查询权限</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grant usage on all sequences in schema public to dev;</span><br></pre></td></tr></table></figure><h3 id="赋予用户dev所有public下表的select权限-1"><a href="#赋予用户dev所有public下表的select权限-1" class="headerlink" title="赋予用户dev所有public下表的select权限"></a>赋予用户dev所有public下表的select权限</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grant select on all tables in schema public to dev;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;添加密匙&quot;&gt;&lt;a href=&quot;#添加密匙&quot; class=&quot;headerlink&quot; title=&quot;添加密匙&quot;&gt;&lt;/a&gt;添加密匙&lt;/h1&gt;&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;wget -q -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&quot;添加安装源&quot;&gt;&lt;a href=&quot;#添加安装源&quot; class=&quot;headerlink&quot; title=&quot;添加安装源&quot;&gt;&lt;/a&gt;添加安装源&lt;/h1&gt;&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sudo sh -c &amp;#x27;echo &amp;quot;deb http://apt.postgresql.org/pub/repos/apt/ $(lsb_release -cs)-pgdg main&amp;quot; &amp;gt; /etc/apt/sources.list.d/pgdg.list&amp;#x27;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&quot;更新apt&quot;&gt;&lt;a href=&quot;#更新apt&quot; class=&quot;headerlink&quot; title=&quot;更新apt&quot;&gt;&lt;/a&gt;更新apt&lt;/h1&gt;&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;apt update&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="linux" scheme="https://blog.soroke.top/categories/linux/"/>
    
    
      <category term="postgresql" scheme="https://blog.soroke.top/tags/postgresql/"/>
    
      <category term="ubuntu16.04" scheme="https://blog.soroke.top/tags/ubuntu16-04/"/>
    
  </entry>
  
  <entry>
    <title>centos7 nimi通过添加yum源安装mysql</title>
    <link href="https://blog.soroke.top/2021/01/06/centos7-nimi-install-mysql/"/>
    <id>https://blog.soroke.top/2021/01/06/centos7-nimi-install-mysql/</id>
    <published>2021-01-06T05:45:44.000Z</published>
    <updated>2021-01-06T06:34:55.131Z</updated>
    
    <content type="html"><![CDATA[<h1 id="配置yum源"><a href="#配置yum源" class="headerlink" title="配置yum源"></a>配置yum源</h1><h3 id="在MySQL官网中下载YUM源rpm安装包：官网获取rpm包的yum源"><a href="#在MySQL官网中下载YUM源rpm安装包：官网获取rpm包的yum源" class="headerlink" title="在MySQL官网中下载YUM源rpm安装包：官网获取rpm包的yum源"></a>在MySQL官网中下载YUM源rpm安装包：<a href="http://dev.mysql.com/downloads/repo/yum/">官网获取rpm包的yum源</a></h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 下载mysql源安装包</span></span><br><span class="line">wget http://dev.mysql.com/get/mysql57-community-release-el7-8.noarch.rpm</span><br><span class="line"><span class="meta">#</span><span class="bash"> 安装mysql源</span></span><br><span class="line">yum localinstall mysql57-community-release-el7-8.noarch.rpm</span><br></pre></td></tr></table></figure><h3 id="检查mysql源是否安装成功"><a href="#检查mysql源是否安装成功" class="headerlink" title="检查mysql源是否安装成功"></a>检查mysql源是否安装成功</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum repolist enabled | grep &quot;mysql.*-community.*&quot;</span><br></pre></td></tr></table></figure><h1 id="安装Mysql"><a href="#安装Mysql" class="headerlink" title="安装Mysql"></a>安装Mysql</h1><h3 id="yum安装"><a href="#yum安装" class="headerlink" title="yum安装"></a>yum安装</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install mysql-community-server</span><br></pre></td></tr></table></figure><h3 id="启动mysql"><a href="#启动mysql" class="headerlink" title="启动mysql"></a>启动mysql</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start mysqld</span><br></pre></td></tr></table></figure><a id="more"></a><h3 id="查看MySQL的启动状态"><a href="#查看MySQL的启动状态" class="headerlink" title="查看MySQL的启动状态"></a>查看MySQL的启动状态</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">systemctl status mysqld</span><br><span class="line">● mysqld.service - MySQL Server</span><br><span class="line">   Loaded: loaded (/usr/lib/systemd/system/mysqld.service; disabled; vendor preset: disabled)</span><br><span class="line">   Active: active (running) since 五 2016-06-24 04:37:37 CST; 35min ago</span><br><span class="line"> Main PID: 2888 (mysqld)</span><br><span class="line">   CGroup: /system.slice/mysqld.service</span><br><span class="line">           └─2888 /usr/sbin/mysqld --daemonize --pid-file=/var/run/mysqld/mysqld.pid</span><br><span class="line"></span><br><span class="line">6月 24 04:37:36 localhost.localdomain systemd[1]: Starting MySQL Server...</span><br><span class="line">6月 24 04:37:37 localhost.localdomain systemd[1]: Started MySQL Server.</span><br></pre></td></tr></table></figure><h3 id="设置开机启动"><a href="#设置开机启动" class="headerlink" title="设置开机启动"></a>设置开机启动</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable mysqld</span><br><span class="line">systemctl daemon-reload</span><br></pre></td></tr></table></figure><h1 id="配置mysql"><a href="#配置mysql" class="headerlink" title="配置mysql"></a>配置mysql</h1><h3 id="查找初始root密码"><a href="#查找初始root密码" class="headerlink" title="查找初始root密码"></a>查找初始root密码</h3><p>此时MySQL已经开始正常运行，不过要想进入MySQL还得先找出此时root用户的密码，通过如下命令可以在日志文件中找出密码</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep &quot;password&quot; /var/log/mysqld.log</span><br></pre></td></tr></table></figure><h3 id="重置root密码"><a href="#重置root密码" class="headerlink" title="重置root密码"></a>重置root密码</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql -uroot -p</span><br><span class="line">ALTER USER &#x27;root&#x27;@&#x27;localhost&#x27; IDENTIFIED BY &#x27;new password&#x27;;</span><br></pre></td></tr></table></figure><h3 id="修改root默认密码-开启root用户远程访问权限"><a href="#修改root默认密码-开启root用户远程访问权限" class="headerlink" title="修改root默认密码,开启root用户远程访问权限"></a>修改root默认密码,开启root用户远程访问权限</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mysql -uroot -p</span><br><span class="line">use mysql;</span><br><span class="line">update user set Password=PASSWORD(&#x27;new password&#x27;) where User=&#x27;root&#x27;;</span><br><span class="line">GRANT ALL PRIVILEGES ON *.* TO root@&quot;%.%.%.%&quot; IDENTIFIED BY &quot;new password&quot;;</span><br><span class="line">flush privileges;</span><br><span class="line">exit;</span><br></pre></td></tr></table></figure><h3 id="配置默认编码为utf8"><a href="#配置默认编码为utf8" class="headerlink" title="配置默认编码为utf8"></a>配置默认编码为utf8</h3><p>修改/etc/my.cnf配置文件，在[mysqld]下添加编码配置</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line">character_set_server&#x3D;utf8</span><br><span class="line">init_connect&#x3D;&#39;SET NAMES utf8&#39;</span><br></pre></td></tr></table></figure><p>然后重启mysql服务</p>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;配置yum源&quot;&gt;&lt;a href=&quot;#配置yum源&quot; class=&quot;headerlink&quot; title=&quot;配置yum源&quot;&gt;&lt;/a&gt;配置yum源&lt;/h1&gt;&lt;h3 id=&quot;在MySQL官网中下载YUM源rpm安装包：官网获取rpm包的yum源&quot;&gt;&lt;a href=&quot;#在MySQL官网中下载YUM源rpm安装包：官网获取rpm包的yum源&quot; class=&quot;headerlink&quot; title=&quot;在MySQL官网中下载YUM源rpm安装包：官网获取rpm包的yum源&quot;&gt;&lt;/a&gt;在MySQL官网中下载YUM源rpm安装包：&lt;a href=&quot;http://dev.mysql.com/downloads/repo/yum/&quot;&gt;官网获取rpm包的yum源&lt;/a&gt;&lt;/h3&gt;&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;bash&quot;&gt; 下载mysql源安装包&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;wget http://dev.mysql.com/get/mysql57-community-release-el7-8.noarch.rpm&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;bash&quot;&gt; 安装mysql源&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;yum localinstall mysql57-community-release-el7-8.noarch.rpm&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;检查mysql源是否安装成功&quot;&gt;&lt;a href=&quot;#检查mysql源是否安装成功&quot; class=&quot;headerlink&quot; title=&quot;检查mysql源是否安装成功&quot;&gt;&lt;/a&gt;检查mysql源是否安装成功&lt;/h3&gt;&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;yum repolist enabled | grep &amp;quot;mysql.*-community.*&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&quot;安装Mysql&quot;&gt;&lt;a href=&quot;#安装Mysql&quot; class=&quot;headerlink&quot; title=&quot;安装Mysql&quot;&gt;&lt;/a&gt;安装Mysql&lt;/h1&gt;&lt;h3 id=&quot;yum安装&quot;&gt;&lt;a href=&quot;#yum安装&quot; class=&quot;headerlink&quot; title=&quot;yum安装&quot;&gt;&lt;/a&gt;yum安装&lt;/h3&gt;&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;yum install mysql-community-server&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;启动mysql&quot;&gt;&lt;a href=&quot;#启动mysql&quot; class=&quot;headerlink&quot; title=&quot;启动mysql&quot;&gt;&lt;/a&gt;启动mysql&lt;/h3&gt;&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;systemctl start mysqld&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="linux" scheme="https://blog.soroke.top/categories/linux/"/>
    
    
      <category term="mysql" scheme="https://blog.soroke.top/tags/mysql/"/>
    
      <category term="centos7" scheme="https://blog.soroke.top/tags/centos7/"/>
    
  </entry>
  
  <entry>
    <title>navicat Windows版本破解安装</title>
    <link href="https://blog.soroke.top/2020/12/05/navicatInstallWindows/"/>
    <id>https://blog.soroke.top/2020/12/05/navicatInstallWindows/</id>
    <published>2020-12-05T09:10:47.000Z</published>
    <updated>2020-12-05T10:24:31.200Z</updated>
    
    <content type="html"><![CDATA[<h1 id="下载地址"><a href="#下载地址" class="headerlink" title="下载地址"></a>下载地址</h1><table><thead><tr><th style="text-align:center">软件名称</th><th style="text-align:center">下载地址</th></tr></thead><tbody><tr><td style="text-align:center">navicat(win64)</td><td style="text-align:center"><a href="http://download.navicat.com/download/navicat121_premium_cs_x64.exe">下载地址</a></td></tr><tr><td style="text-align:center">navicat(win32)</td><td style="text-align:center"><a href="http://download.navicat.com/download/navicat121_premium_cs_x32.exe">下载地址</a></td></tr><tr><td style="text-align:center">navicat-keygen</td><td style="text-align:center"><a href="/lib/navicat-keygen-for-win64.zip">下载地址</a></td></tr></tbody></table><a id="more"></a><h1 id="使用Navicat-Keygen-for-Windows激活"><a href="#使用Navicat-Keygen-for-Windows激活" class="headerlink" title="使用Navicat Keygen - for Windows激活"></a>使用Navicat Keygen - for Windows激活</h1><h2 id="如何使用这个注册机"><a href="#如何使用这个注册机" class="headerlink" title="如何使用这个注册机"></a>如何使用这个注册机</h2><h3 id="使用navicat-patcher-exe替换掉navicat-exe和libcc-dll里的Navicat激活公钥"><a href="#使用navicat-patcher-exe替换掉navicat-exe和libcc-dll里的Navicat激活公钥" class="headerlink" title="使用navicat-patcher.exe替换掉navicat.exe和libcc.dll里的Navicat激活公钥"></a>使用navicat-patcher.exe替换掉navicat.exe和libcc.dll里的Navicat激活公钥</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">navicat-patcher.exe &quot;C:\Program Files\PremiumSoft\Navicat Premium 12&quot;</span><br></pre></td></tr></table></figure><ul><li>Navicat Premium 12.1.12 简体中文版已通过测试。下面将是一份样例输出。</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line">***************************************************</span><br><span class="line">*       Navicat Patcher by @DoubleLabyrinth       *</span><br><span class="line">*           Release date: Jan 19 2019             *</span><br><span class="line">***************************************************</span><br><span class="line"></span><br><span class="line">Press Enter to continue or Ctrl + C to abort.</span><br><span class="line"></span><br><span class="line">MESSAGE: PatchSolution0 will be omitted.</span><br><span class="line"></span><br><span class="line">MESSAGE: PatchSolution3: Keywords[0] has been found:</span><br><span class="line">         Relative Machine Code Offset &#x3D; +0x0000000001644a08</span><br><span class="line">         Relative Machine Code RVA    &#x3D; +0x0000000001645608</span><br><span class="line">         Patch Offset                 &#x3D; +0x00000000023d56e4</span><br><span class="line">         Patch Size                   &#x3D; 3 byte(s)</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">MESSAGE: PatchSolution3: Keywords[110] has been found:</span><br><span class="line">         Relative Machine Code Offset &#x3D; +0x000000000165155e</span><br><span class="line">         Relative Machine Code RVA    &#x3D; +0x000000000165215e</span><br><span class="line">         Patch Offset                 &#x3D; +0x0000000001651561</span><br><span class="line">         Patch Size                   &#x3D; 1 byte(s)</span><br><span class="line"></span><br><span class="line">MESSAGE: PatchSolution2 will be omitted.</span><br><span class="line"></span><br><span class="line">MESSAGE: PatchSolution1: Keywords[0] has been found: offset &#x3D; +0x021f7390.</span><br><span class="line">MESSAGE: PatchSolution1: Keywords[1] has been found: offset &#x3D; +0x0074bd39.</span><br><span class="line">MESSAGE: PatchSolution1: Keywords[2] has been found: offset &#x3D; +0x021f70a0.</span><br><span class="line">MESSAGE: PatchSolution1: Keywords[3] has been found: offset &#x3D; +0x0074bd1f.</span><br><span class="line">MESSAGE: PatchSolution1: Keywords[4] has been found: offset &#x3D; +0x021f708c.</span><br><span class="line"></span><br><span class="line">MESSAGE: Generating new RSA private key, it may take a long time.</span><br><span class="line">MESSAGE: New RSA private key has been saved to RegPrivateKey.pem.</span><br><span class="line"></span><br><span class="line">Your RSA public key:</span><br><span class="line">-----BEGIN PUBLIC KEY-----</span><br><span class="line">MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAsWnV5hQxlXvDA3Ad4k5N</span><br><span class="line">ZLz4cO+iGEPegSovIDcwTo097I+0pXYKPTVl+0iKC5JtJRObb4Xx9yK9gGwqkcxo</span><br><span class="line">o6WzKq0xY1jz7X6obxwlQCNse3Os1wr0rIY0UzP1dCpkW&#x2F;5MwGbFxiB6PEVqkzmJ</span><br><span class="line">CmHBzZDRu&#x2F;jAuL1nyoiGnUStqwENNYhyl4k7r8AiJkBZGMOCrj6v0JfgNna25Ce6</span><br><span class="line">QCFojlY4dkYQ5&#x2F;7njQ3qpLwMeLEXEysMW3aUScSB68&#x2F;vsHnB4C0fIkwfEPYZ&#x2F;AC5</span><br><span class="line">AqbWHVbNmveB3rjV+tZZxXcLE8ArgKh1Gs+2VtnL09gwHm6WcpyPZ42G6tMDjWyw</span><br><span class="line">1wIDAQAB</span><br><span class="line">-----END PUBLIC KEY-----</span><br><span class="line"></span><br><span class="line">******************************************</span><br><span class="line">*            PatchSulution3              *</span><br><span class="line">******************************************</span><br><span class="line">@ +023d56e4: 4D 49 49 ---&gt; 4D 49 49</span><br><span class="line">@ +01644a63: 42 49 ---&gt; 42 49</span><br><span class="line">@ +01644a68: 6A ---&gt; 6A</span><br><span class="line">@ +01644ace: 41 ---&gt; 41</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">@ +023d58d4: 36 63 6A ---&gt; 47 36 74</span><br><span class="line">@ +023d58d8: 78 6C 6A 75 75 51 61 ---&gt; 4D 44 6A 57 79 77 31</span><br><span class="line">@ +023d58e8: 77 49 44 41 ---&gt; 77 49 44 41</span><br><span class="line">@ +0165155c: 51 41 ---&gt; 51 41</span><br><span class="line">@ +01651561: 42 ---&gt; 42</span><br><span class="line"></span><br><span class="line">******************************************</span><br><span class="line">*            PatchSulution1              *</span><br><span class="line">******************************************</span><br><span class="line">@ +0x021f7390</span><br><span class="line">Previous:</span><br><span class="line">+0x00000000021F7390  44 37 35 31 32 35 42 37 30 37 36 37 42 39 34 31  D75125B70767B941</span><br><span class="line">+0x00000000021F73A0  34 35 42 34 37 43 31 43 42 33 43 30 37 35 35 45  45B47C1CB3C0755E</span><br><span class="line">+0x00000000021F73B0  37 43 43 42 38 38 32 35 43 35 44 43 45 30 43 35  7CCB8825C5DCE0C5</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">@ +0x021f708c</span><br><span class="line">Previous:</span><br><span class="line">+0x00000000021F7080  31 32 32 35 4f 45 29 2e 00 00 00 00 39 32 39 33  1225OE).....9293</span><br><span class="line">+0x00000000021F7090  33 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  3...............</span><br><span class="line">After:</span><br><span class="line">+0x00000000021F7080  31 32 32 35 4f 45 29 2e 00 00 00 00 32 37 45 38  1225OE).....27E8</span><br><span class="line">+0x00000000021F7090  45 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  E...............</span><br><span class="line"></span><br><span class="line">MESSAGE: Patch has been done successfully.</span><br></pre></td></tr></table></figure><h3 id="接下来使用navicat-keygen-exe来生成序列号和激活码"><a href="#接下来使用navicat-keygen-exe来生成序列号和激活码" class="headerlink" title="接下来使用navicat-keygen.exe来生成序列号和激活码"></a>接下来使用navicat-keygen.exe来生成序列号和激活码</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">navicat-keygen.exe -text .\RegPrivateKey.pem</span><br></pre></td></tr></table></figure><ul><li>你会被要求选择Navicat产品类别、语言以及输入主版本号。之后会随机生成一个序列号。</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">Select Navicat product:</span><br><span class="line">0. DataModeler</span><br><span class="line">1. Premium</span><br><span class="line">2. MySQL</span><br><span class="line">3. PostgreSQL</span><br><span class="line">4. Oracle</span><br><span class="line">5. SQLServer</span><br><span class="line">6. SQLite</span><br><span class="line">7. MariaDB</span><br><span class="line">8. MongoDB</span><br><span class="line">9. ReportViewer</span><br><span class="line"></span><br><span class="line">(Input index)&gt; 1</span><br><span class="line"></span><br><span class="line">Select product language:</span><br><span class="line">0. English</span><br><span class="line">1. Simplified Chinese</span><br><span class="line">2. Traditional Chinese</span><br><span class="line">3. Japanese</span><br><span class="line">4. Polish</span><br><span class="line">5. Spanish</span><br><span class="line">6. French</span><br><span class="line">7. German</span><br><span class="line">8. Korean</span><br><span class="line">9. Russian</span><br><span class="line">10. Portuguese</span><br><span class="line"></span><br><span class="line">(Input index)&gt; 1</span><br><span class="line"></span><br><span class="line">(Input major version number, range: 0 ~ 15, default: 12)&gt; 12</span><br><span class="line"></span><br><span class="line">Serial number:</span><br><span class="line">NAVO-2ORP-IN5A-GQEE</span><br><span class="line"></span><br><span class="line">Your name: </span><br></pre></td></tr></table></figure><ul><li><p>你可以使用这个序列号暂时激活Navicat。</p></li><li><p>接下来你会被要求输入用户名和组织名；请随便填写，但不要太长。</p></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Your name: DoubleLabyrinth</span><br><span class="line">Your organization: DoubleLabyrinth</span><br><span class="line">Input request code (in Base64), input empty line to end:</span><br></pre></td></tr></table></figure><ul><li>之后你会被要求填入请求码。注意 不要关闭命令行.</li></ul><ul><li><p>断开网络 并打开Navicat。找到注册窗口，并填入keygen给你的序列号。然后点击激活按钮。</p></li><li><p>一般来说在线激活肯定会失败，这时候Navicat会询问你是否手动激活，直接选吧。</p></li><li><p>在手动激活窗口你会得到一个请求码，复制它并把它粘贴到keygen里。最后别忘了连按至少两下回车结束输入。</p></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">Your name: DoubleLabyrinth</span><br><span class="line">Your organization: DoubleLabyrinth</span><br><span class="line"></span><br><span class="line">Input request code (in Base64), input empty line to end:</span><br><span class="line">t2U+0yfE2FfnbjyhCXa0lglZOHu9Ntc3qyGiPbR6xb1QoU63&#x2F;9BVfdaCq0blwVycXPyT&#x2F;Vqw5joIKdM5oCRR&#x2F;afCPM7iRcyhQMAnvqwc+AOKCqayVV+SqKLvtR&#x2F;AbREI12w++PQ6Ewfs4A8PgB8OJ9G0jKt6Q&#x2F;iJRblqi2WWw9mwy+YHcYYh3UAfygTnyj&#x2F;xl+MzRymbY0lkus+6LPtpDecVsFFhM7F32Ee1QPwISko7bAkHOtkt+joPfYDdn9PDGZ4HEmeLvH6UqZCXkzgaAfynB7cQZFEkId8FsW2NGkbpM7wB2Hi3fNFgOIjutTprixTdbpFKn4w6gGc28ve23A&#x3D;&#x3D;</span><br><span class="line"></span><br><span class="line">Request Info:</span><br><span class="line">&#123;&quot;K&quot;:&quot;NAVO2ORPIN5AGQEE&quot;, &quot;DI&quot;:&quot;R91j6WyMhxHznAKSxxxx&quot;, &quot;P&quot;:&quot;WIN&quot;&#125;</span><br><span class="line"></span><br><span class="line">Response Info:</span><br><span class="line">&#123;&quot;K&quot;:&quot;NAVO2ORPIN5AGQEE&quot;,&quot;DI&quot;:&quot;R91j6WyMhxHznAKSxxxx&quot;,&quot;N&quot;:&quot;DoubleLabyrinth&quot;,&quot;O&quot;:&quot;DoubleLabyrinth&quot;,&quot;T&quot;:1547826060&#125;</span><br><span class="line"></span><br><span class="line">License:</span><br><span class="line">lRF18o+ZhBphyN0U5kFLHtAAGGXuvhqOcxNuvAk4dJcGeR0ISuw74mQvAfdNjv0T</span><br><span class="line">I5NZFzqIJvrzM0XeR88q+3kmZkECuxwwWHP3zzDPhPiylcTV4DoGZ1tfoViUSYQc</span><br><span class="line">LgXG0Fl7koZeP61YOKQ8GfX+Xk2ZTM64bYaF7NlhonM+GQUJCCF2JThmrP921t2p</span><br><span class="line">b&#x2F;E5pV6fLOYMM13881ZQcQcltMNVDZn4lzgzKRFFxCQFaTl6fJMHZdYVmICQTHtI</span><br><span class="line">sNaym0zduc8&#x2F;cv34mgJ+7NseXmsEPCdjrZ59wgfPsLhZLXqtfxi5hGWw4NMa3Sb2</span><br><span class="line">UI8dzqFzRp&#x2F;hSDEM0mEqiA&#x3D;&#x3D;</span><br></pre></td></tr></table></figure><ul><li>如果不出意外，你会得到一个看似用Base64编码的激活码。直接复制它，并把它粘贴到Navicat的手动激活窗口，最后点激活按钮。如果没什么意外的话应该能成功激活。</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;下载地址&quot;&gt;&lt;a href=&quot;#下载地址&quot; class=&quot;headerlink&quot; title=&quot;下载地址&quot;&gt;&lt;/a&gt;下载地址&lt;/h1&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&quot;text-align:center&quot;&gt;软件名称&lt;/th&gt;
&lt;th style=&quot;text-align:center&quot;&gt;下载地址&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;navicat(win64)&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;&lt;a href=&quot;http://download.navicat.com/download/navicat121_premium_cs_x64.exe&quot;&gt;下载地址&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;navicat(win32)&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;&lt;a href=&quot;http://download.navicat.com/download/navicat121_premium_cs_x32.exe&quot;&gt;下载地址&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;navicat-keygen&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;&lt;a href=&quot;/lib/navicat-keygen-for-win64.zip&quot;&gt;下载地址&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
    
    </summary>
    
    
      <category term="破解" scheme="https://blog.soroke.top/tags/%E7%A0%B4%E8%A7%A3/"/>
    
      <category term="navicat" scheme="https://blog.soroke.top/tags/navicat/"/>
    
  </entry>
  
  <entry>
    <title>ShadowsocksR+Caddy+TLS伪装流量科学上网</title>
    <link href="https://blog.soroke.top/2020/12/03/ssrCreate/"/>
    <id>https://blog.soroke.top/2020/12/03/ssrCreate/</id>
    <published>2020-12-03T02:21:48.000Z</published>
    <updated>2020-12-05T03:53:39.460Z</updated>
    
    <content type="html"><![CDATA[<h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><p>无论是ss还是ssr最近都出现了IP频繁被墙的情况，本文介绍如何通过ShadowsocksR+Caddy+TLS伪装流量科学上网，大大减小VPS被墙的概率。</p><h1 id="购买vps"><a href="#购买vps" class="headerlink" title="购买vps"></a>购买vps</h1><ul><li><p><a href="https://console.cloud.google.com/">免费注册Google Cloud</a></p></li><li><p><a href="https://www.vultr.com/?ref=7931367">点击优惠注册vultr</a></p></li></ul><a id="more"></a><h1 id="进入管理员-root"><a href="#进入管理员-root" class="headerlink" title="进入管理员(root)"></a>进入管理员(root)</h1><ul><li>需要进入root才能安装各种各样的服务<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo su</span><br></pre></td></tr></table></figure></li></ul><h1 id="开启Google-BBR加速-可选"><a href="#开启Google-BBR加速-可选" class="headerlink" title="开启Google BBR加速(可选)"></a>开启Google BBR加速(可选)</h1><p>Linux内核4.9以及上默认支持了该算法，直接启用就行(谷歌云)  </p><ul><li><p>检查Linux内核版本</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uname -r</span><br></pre></td></tr></table></figure></li><li><p>添加并启用Google BBR模块到内核</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;net.core.default_qdisc=fq&quot; &gt;&gt; /etc/sysctl.conf</span><br><span class="line">echo &quot;net.ipv4.tcp_congestion_control=bbr&quot; &gt;&gt; /etc/sysctl.conf</span><br><span class="line">sysctl -p</span><br></pre></td></tr></table></figure></li><li><p>检查是否成功加入Google BBR模块到内核中</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sysctl net.ipv4.tcp_available_congestion_control</span><br></pre></td></tr></table></figure></li><li><p>验证是否启用了Google BBR</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsmod | grep bbr</span><br></pre></td></tr></table></figure></li></ul><h1 id="在线工具"><a href="#在线工具" class="headerlink" title="在线工具"></a>在线工具</h1><ul><li><a href="https://www.editpad.org/">在线文本编辑器</a></li></ul><h1 id="配置caddy服务器"><a href="#配置caddy服务器" class="headerlink" title="配置caddy服务器"></a>配置caddy服务器</h1><ul><li>安装caddy</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl https://getcaddy.com | bash -s personal</span><br></pre></td></tr></table></figure><ul><li>查看caddy所在位置</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">whereis caddy</span><br></pre></td></tr></table></figure><ul><li>创建网站目录</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /usr/local/caddy/www/ &amp;&amp; cd /usr/local/caddy/www/</span><br></pre></td></tr></table></figure><ul><li>创建网页测试文件</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;Welcome to subscribe to my YouTube channel.&quot; &gt; index.html</span><br></pre></td></tr></table></figure><ul><li>运行caddy服务器</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">caddy</span><br></pre></td></tr></table></figure><ul><li><p>访问caddy服务器(默认端口:2015)<br><a href="http://example_ip:2015">http://example_ip:2015</a></p></li><li><p>CTRL+ C 停止caddy运行</p></li><li>下载网页模版并解压到/usr/local/caddy/www/目录</li></ul><ul><li><a href="https://www.free-css.com/free-css-templates">网页模板1</a></li><li><a href="https://colorlib.com/wp/templates/">网页模板2</a></li></ul><ul><li>安装unzip</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Centos</span><br><span class="line">yum install wget unzip -y</span><br><span class="line"></span><br><span class="line">Debian/Ubuntu</span><br><span class="line">apt install wget unzip -y</span><br></pre></td></tr></table></figure><ul><li>下载模板</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">wget website.zip # 下载文件</span><br><span class="line">ls # 查看当前文件夹的文件，看是否包含下载的网站文件</span><br><span class="line">unzip website.zip # 解压文件</span><br><span class="line">mv website/* . # 如果解压后项目文件包含在文件夹需要移动解压后的项目文件到当前目录</span><br></pre></td></tr></table></figure><ul><li>创建Caddyfile</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;https://v2ray.duyuanchao.me:2333 &#123;</span><br><span class="line">root /usr/local/caddy/www/</span><br><span class="line">timeouts none</span><br><span class="line">tls duyuanchao.me@gmail.com</span><br><span class="line">&#125;&quot; &gt; /usr/local/caddy/Caddyfile</span><br></pre></td></tr></table></figure><ul><li>再次运行caddy服务器测试</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/caddy/ # 必须切换到Caddyfile所在目录</span><br><span class="line">caddy</span><br></pre></td></tr></table></figure><ul><li>https访问网站</li></ul><p><a href="https://v2ray.duyuanchao.me:2333">https://v2ray.duyuanchao.me:2333</a></p><ul><li><p>Ctrl + C停止caddy</p></li><li><p>后台运行caddy服务</p></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohup caddy &amp;</span><br></pre></td></tr></table></figure><ul><li>停止caddy</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ps -ax | grep caddy</span><br><span class="line">kill `caddy-id`</span><br></pre></td></tr></table></figure><h1 id="开启https端口号-443"><a href="#开启https端口号-443" class="headerlink" title="开启https端口号(443)"></a>开启https端口号(443)</h1><p>这里强力建议不要直接把防火墙关闭暴露所有端口号，而是打开防火墙减少服务器被墙的风险。</p><ul><li>安装ufw<blockquote><p>UFW 全称为 Uncomplicated Firewall，是 Ubuntu 系统上默认的防火墙组件, 为了轻量化配置 iptables 而开发的一款工具。UFW 提供一个非常友好的界面用于创建基于IPV4，IPV6的防火墙规则。</p></blockquote></li></ul><table><thead><tr><th style="text-align:center">Centos</th><th style="text-align:center">Debian/Ubuntu</th></tr></thead><tbody><tr><td style="text-align:center"><code>yum -y install ufw</code></td><td style="text-align:center"><code>apt install ufw -y</code></td></tr></tbody></table><ul><li>查看防火墙状态</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ufw status</span><br></pre></td></tr></table></figure><ul><li>开启防火墙</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ufw enable</span><br></pre></td></tr></table></figure><ul><li>关闭防火墙</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ufw disable</span><br></pre></td></tr></table></figure><ul><li>开启https端口(443)</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ufw allow 443,2333/tcp</span><br></pre></td></tr></table></figure><ul><li>开启ssh端口</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ufw allow ssh</span><br></pre></td></tr></table></figure><h1 id="配置ShadowsocksR"><a href="#配置ShadowsocksR" class="headerlink" title="配置ShadowsocksR"></a>配置ShadowsocksR</h1><ul><li>安装ShadowsocksR</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -N --no-check-certificate https://raw.githubusercontent.com/teddysun/shadowsocks_install/master/shadowsocksR.sh &amp;&amp; chmod +x shadowsocksR.sh &amp;&amp; ./shadowsocksR.sh</span><br></pre></td></tr></table></figure><ul><li>替换SSR配置文件</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">cat &lt;&lt;EOT &gt; /etc/shadowsocks.json</span><br><span class="line">&#123;</span><br><span class="line">    &quot;server&quot;:&quot;0.0.0.0&quot;,</span><br><span class="line">    &quot;server_ipv6&quot;:&quot;[::]&quot;,</span><br><span class="line">    &quot;server_port&quot;:443,</span><br><span class="line">    &quot;local_address&quot;:&quot;127.0.0.1&quot;,</span><br><span class="line">    &quot;local_port&quot;:1080,</span><br><span class="line">    &quot;password&quot;:&quot;duyuanchao&quot;,</span><br><span class="line">    &quot;timeout&quot;:120,</span><br><span class="line">    &quot;method&quot;:&quot;none&quot;,</span><br><span class="line">    &quot;protocol&quot;:&quot;auth_chain_a&quot;,</span><br><span class="line">    &quot;protocol_param&quot;:&quot;&quot;,</span><br><span class="line">    &quot;obfs&quot;:&quot;tls1.2_ticket_auth&quot;,</span><br><span class="line">    &quot;obfs_param&quot;:&quot;&quot;,</span><br><span class="line">    &quot;redirect&quot;:[&quot;*:443#127.0.0.1:2333&quot;],</span><br><span class="line">    &quot;dns_ipv6&quot;:false,</span><br><span class="line">    &quot;fast_open&quot;:false,</span><br><span class="line">    &quot;workers&quot;:1</span><br><span class="line">&#125;</span><br><span class="line">EOT</span><br></pre></td></tr></table></figure><ul><li>重启ShadowsocksR</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/etc/init.d/shadowsocks restart</span><br></pre></td></tr></table></figure><h2 id="客服端链接"><a href="#客服端链接" class="headerlink" title="客服端链接"></a>客服端链接</h2><p>客服端切记端口号为443,加密方式为none</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ip: v2ray.duyuanchao.me</span><br><span class="line">端口号: 443</span><br><span class="line">密码: duyuanchao</span><br><span class="line">加密: none</span><br><span class="line">协议: auth_chain_a</span><br><span class="line">混淆: tls1.2_ticket_auth</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;简介&quot;&gt;&lt;a href=&quot;#简介&quot; class=&quot;headerlink&quot; title=&quot;简介&quot;&gt;&lt;/a&gt;简介&lt;/h1&gt;&lt;p&gt;无论是ss还是ssr最近都出现了IP频繁被墙的情况，本文介绍如何通过ShadowsocksR+Caddy+TLS伪装流量科学上网，大大减小VPS被墙的概率。&lt;/p&gt;
&lt;h1 id=&quot;购买vps&quot;&gt;&lt;a href=&quot;#购买vps&quot; class=&quot;headerlink&quot; title=&quot;购买vps&quot;&gt;&lt;/a&gt;购买vps&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;https://console.cloud.google.com/&quot;&gt;免费注册Google Cloud&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;https://www.vultr.com/?ref=7931367&quot;&gt;点击优惠注册vultr&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="科学上网" scheme="https://blog.soroke.top/categories/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/"/>
    
    
      <category term="ShadowsocksR" scheme="https://blog.soroke.top/tags/ShadowsocksR/"/>
    
      <category term="科学上网" scheme="https://blog.soroke.top/tags/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/"/>
    
  </entry>
  
  <entry>
    <title>安装Docker和docker-compose并配置镜像加速</title>
    <link href="https://blog.soroke.top/2020/11/27/installDocker/"/>
    <id>https://blog.soroke.top/2020/11/27/installDocker/</id>
    <published>2020-11-27T08:46:48.000Z</published>
    <updated>2020-11-27T09:05:47.258Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Docker-CE安装"><a href="#Docker-CE安装" class="headerlink" title="Docker-CE安装"></a>Docker-CE安装</h1><h2 id="Ubuntu"><a href="#Ubuntu" class="headerlink" title="Ubuntu"></a>Ubuntu</h2><h3 id="安装必要的一些系统工具"><a href="#安装必要的一些系统工具" class="headerlink" title="安装必要的一些系统工具"></a>安装必要的一些系统工具</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get -y install apt-transport-https ca-certificates curl software-properties-common</span><br></pre></td></tr></table></figure><h3 id="安装GPG证书"><a href="#安装GPG证书" class="headerlink" title="安装GPG证书"></a>安装GPG证书</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -fsSL http://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg | sudo apt-key add -</span><br></pre></td></tr></table></figure><a id="more"></a><h3 id="写入软件源信息"><a href="#写入软件源信息" class="headerlink" title="写入软件源信息"></a>写入软件源信息</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo add-apt-repository &quot;deb [arch=amd64] http://mirrors.aliyun.com/docker-ce/linux/ubuntu $(lsb_release -cs) stable&quot;</span><br></pre></td></tr></table></figure><h3 id="更新并安装-Docker-CE"><a href="#更新并安装-Docker-CE" class="headerlink" title="更新并安装 Docker-CE"></a>更新并安装 Docker-CE</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get -y update</span><br><span class="line">sudo apt-get -y install docker-ce</span><br></pre></td></tr></table></figure><h2 id="CentOS-7"><a href="#CentOS-7" class="headerlink" title="CentOS 7"></a>CentOS 7</h2><h3 id="安装必要的一些系统工具-1"><a href="#安装必要的一些系统工具-1" class="headerlink" title="安装必要的一些系统工具"></a>安装必要的一些系统工具</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install -y yum-utils device-mapper-persistent-data lvm2</span><br></pre></td></tr></table></figure><h3 id="添加软件源信息"><a href="#添加软件源信息" class="headerlink" title="添加软件源信息"></a>添加软件源信息</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span><br></pre></td></tr></table></figure><h3 id="更新并安装-Docker-CE-1"><a href="#更新并安装-Docker-CE-1" class="headerlink" title="更新并安装 Docker-CE"></a>更新并安装 Docker-CE</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo yum makecache fast</span><br><span class="line">sudo yum -y install docker-ce</span><br></pre></td></tr></table></figure><h3 id="开启Docker服务"><a href="#开启Docker服务" class="headerlink" title="开启Docker服务"></a>开启Docker服务</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo service docker start</span><br></pre></td></tr></table></figure><h3 id="安装校验"><a href="#安装校验" class="headerlink" title="安装校验"></a>安装校验</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">root@iZbp12adskpuoxodbkqzjfZ:$ docker version</span><br><span class="line">Client:</span><br><span class="line"> Version:      17.03.0-ce</span><br><span class="line"> API version:  1.26</span><br><span class="line"> Go version:   go1.7.5</span><br><span class="line"> Git commit:   3a232c8</span><br><span class="line"> Built:        Tue Feb 28 07:52:04 2017</span><br><span class="line"> OS/Arch:      linux/amd64</span><br><span class="line"></span><br><span class="line">Server:</span><br><span class="line"> Version:      17.03.0-ce</span><br><span class="line"> API version:  1.26 (minimum version 1.12)</span><br><span class="line"> Go version:   go1.7.5</span><br><span class="line"> Git commit:   3a232c8</span><br><span class="line"> Built:        Tue Feb 28 07:52:04 2017</span><br><span class="line"> OS/Arch:      linux/amd64</span><br><span class="line"> Experimental: false</span><br></pre></td></tr></table></figure><h1 id="docker-compose安装"><a href="#docker-compose安装" class="headerlink" title="docker-compose安装"></a>docker-compose安装</h1><h2 id="下载程序"><a href="#下载程序" class="headerlink" title="下载程序"></a>下载程序</h2><p>从github上下载docker-compose二进制文件安装</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo curl -L https://github.com/docker/compose/releases/download/1.27.4/docker-compose-`uname -s`-`uname -m` -o /usr/bin/docker-compose</span><br></pre></td></tr></table></figure><h2 id="添加可执行权限"><a href="#添加可执行权限" class="headerlink" title="添加可执行权限"></a>添加可执行权限</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo chmod +x /usr/bin/docker-compose</span><br></pre></td></tr></table></figure><h2 id="测试安装结果"><a href="#测试安装结果" class="headerlink" title="测试安装结果"></a>测试安装结果</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose --version </span><br></pre></td></tr></table></figure><h1 id="docker配置阿里云源"><a href="#docker配置阿里云源" class="headerlink" title="docker配置阿里云源"></a>docker配置阿里云源</h1><p>登陆阿里云镜像加速器<a href="https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors">https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors</a><br>根据提示获取加速地址和配置加速<br>检查是否生效<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker info</span><br></pre></td></tr></table></figure><br> 命令返回最下面一行如过有如下内容证明配置成功<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">      Registry Mirrors:</span><br><span class="line">https://xxxxxxx.mirror.aliyuncs.com/</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Docker-CE安装&quot;&gt;&lt;a href=&quot;#Docker-CE安装&quot; class=&quot;headerlink&quot; title=&quot;Docker-CE安装&quot;&gt;&lt;/a&gt;Docker-CE安装&lt;/h1&gt;&lt;h2 id=&quot;Ubuntu&quot;&gt;&lt;a href=&quot;#Ubuntu&quot; class=&quot;headerlink&quot; title=&quot;Ubuntu&quot;&gt;&lt;/a&gt;Ubuntu&lt;/h2&gt;&lt;h3 id=&quot;安装必要的一些系统工具&quot;&gt;&lt;a href=&quot;#安装必要的一些系统工具&quot; class=&quot;headerlink&quot; title=&quot;安装必要的一些系统工具&quot;&gt;&lt;/a&gt;安装必要的一些系统工具&lt;/h3&gt;&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sudo apt-get update&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo apt-get -y install apt-transport-https ca-certificates curl software-properties-common&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;安装GPG证书&quot;&gt;&lt;a href=&quot;#安装GPG证书&quot; class=&quot;headerlink&quot; title=&quot;安装GPG证书&quot;&gt;&lt;/a&gt;安装GPG证书&lt;/h3&gt;&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;curl -fsSL http://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg | sudo apt-key add -&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="运维" scheme="https://blog.soroke.top/categories/%E8%BF%90%E7%BB%B4/"/>
    
      <category term="docker" scheme="https://blog.soroke.top/categories/%E8%BF%90%E7%BB%B4/docker/"/>
    
    
      <category term="docker" scheme="https://blog.soroke.top/tags/docker/"/>
    
      <category term="docker安装" scheme="https://blog.soroke.top/tags/docker%E5%AE%89%E8%A3%85/"/>
    
      <category term="docker阿里云加速" scheme="https://blog.soroke.top/tags/docker%E9%98%BF%E9%87%8C%E4%BA%91%E5%8A%A0%E9%80%9F/"/>
    
  </entry>
  
  <entry>
    <title>docker镜像web在线管理工具-portainer</title>
    <link href="https://blog.soroke.top/2020/11/27/portainer/"/>
    <id>https://blog.soroke.top/2020/11/27/portainer/</id>
    <published>2020-11-27T08:13:22.000Z</published>
    <updated>2020-11-27T09:08:10.755Z</updated>
    
    <content type="html"><![CDATA[<h1 id="portainer-git地址"><a href="#portainer-git地址" class="headerlink" title="portainer git地址"></a>portainer git地址</h1><p><a href="https://github.com/portainer/portainer">https://github.com/portainer/portainer</a></p><h1 id="所需运行环境"><a href="#所需运行环境" class="headerlink" title="所需运行环境"></a>所需运行环境</h1><table><thead><tr><th style="text-align:center">所需软件名称</th><th style="text-align:center">版本号</th></tr></thead><tbody><tr><td style="text-align:center">docker</td><td style="text-align:center">v17.06.0-ce及以上</td></tr><tr><td style="text-align:center">docker-compose</td><td style="text-align:center">v1.18.0及以上</td></tr></tbody></table><a id="more"></a><h1 id="流程"><a href="#流程" class="headerlink" title="流程"></a>流程</h1><h3 id="下载portainer汉化包"><a href="#下载portainer汉化包" class="headerlink" title="下载portainer汉化包"></a>下载portainer汉化包</h3><p>创建运行目录，并下载中文包<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> /opt &amp;&amp; mkdir portainer-cn</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> portainer-cn</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> wget https://dl.quchao.net/Soft/Portainer-CN.zip -O Portainer-CN.zip</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> unzip -d ./Portainer-CN Portainer-CN.zip</span></span><br></pre></td></tr></table></figure></p><h3 id="创建启动docker-compose-yml"><a href="#创建启动docker-compose-yml" class="headerlink" title="创建启动docker-compose.yml"></a>创建启动docker-compose.yml</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> /opt/portainer-cn</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> touch docker-compose.yml</span></span><br></pre></td></tr></table></figure><p>文件内容如下</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">version: &#39;3&#39;</span><br><span class="line">services:</span><br><span class="line">  portainer:</span><br><span class="line">    image: portainer&#x2F;portainer:latest</span><br><span class="line">    ports:</span><br><span class="line">    - &quot;9001:9000&quot; #9001为提供服务端口,按需修改</span><br><span class="line">    volumes:</span><br><span class="line">    - &#x2F;var&#x2F;run&#x2F;docker.sock:&#x2F;var&#x2F;run&#x2F;docker.sock</span><br><span class="line">    - .&#x2F;Portainer-CN:&#x2F;public #映射汉化包进去</span><br><span class="line">    restart: always</span><br></pre></td></tr></table></figure><h3 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker-compose up -d</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;portainer-git地址&quot;&gt;&lt;a href=&quot;#portainer-git地址&quot; class=&quot;headerlink&quot; title=&quot;portainer git地址&quot;&gt;&lt;/a&gt;portainer git地址&lt;/h1&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/portainer/portainer&quot;&gt;https://github.com/portainer/portainer&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&quot;所需运行环境&quot;&gt;&lt;a href=&quot;#所需运行环境&quot; class=&quot;headerlink&quot; title=&quot;所需运行环境&quot;&gt;&lt;/a&gt;所需运行环境&lt;/h1&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&quot;text-align:center&quot;&gt;所需软件名称&lt;/th&gt;
&lt;th style=&quot;text-align:center&quot;&gt;版本号&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;docker&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;v17.06.0-ce及以上&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;docker-compose&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;v1.18.0及以上&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
    
    </summary>
    
      <category term="运维" scheme="https://blog.soroke.top/categories/%E8%BF%90%E7%BB%B4/"/>
    
      <category term="docker" scheme="https://blog.soroke.top/categories/%E8%BF%90%E7%BB%B4/docker/"/>
    
    
      <category term="docker" scheme="https://blog.soroke.top/tags/docker/"/>
    
      <category term="portainer" scheme="https://blog.soroke.top/tags/portainer/"/>
    
      <category term="portainer汉化" scheme="https://blog.soroke.top/tags/portainer%E6%B1%89%E5%8C%96/"/>
    
      <category term="docker-web管理" scheme="https://blog.soroke.top/tags/docker-web%E7%AE%A1%E7%90%86/"/>
    
  </entry>
  
  <entry>
    <title>intellij激活(2020.1.3及之前版本有效)</title>
    <link href="https://blog.soroke.top/2020/11/20/intellij%E6%BF%80%E6%B4%BB%E5%B7%A5%E5%85%B7-2020-1-3%E5%8F%8A%E4%B9%8B%E5%89%8D%E7%89%88%E6%9C%AC%E6%9C%89%E6%95%88/"/>
    <id>https://blog.soroke.top/2020/11/20/intellij激活工具-2020-1-3及之前版本有效/</id>
    <published>2020-11-20T01:43:04.000Z</published>
    <updated>2020-12-11T08:08:17.888Z</updated>
    
    <content type="html"><![CDATA[<h1 id="软件包"><a href="#软件包" class="headerlink" title="软件包"></a>软件包</h1><table><thead><tr><th style="text-align:center">软件名称</th><th style="text-align:center">软件下载地址</th></tr></thead><tbody><tr><td style="text-align:center">IDEA2020.1.3</td><td style="text-align:center"><a href="https://download.jetbrains.com/idea/ideaIU-2020.1.3.exe">下载地址</a></td></tr><tr><td style="text-align:center">破解工具包</td><td style="text-align:center"><a href="/lib/jetbrains-agent-latest.zip">下载地址</a></td></tr></tbody></table><h1 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">请勿升级到2020.1.4版本，会导致无法激活，请使用2020.1.3及以下版本！  </span><br><span class="line">如果之前在lib目录下已经有了jar文件，请一定要删除它！ </span><br><span class="line">不需要修改host！！！！</span><br></pre></td></tr></table></figure><h1 id="破解方法"><a href="#破解方法" class="headerlink" title="破解方法"></a>破解方法</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">正常安装IDEA2020.1.3,安装完成后打开  </span><br><span class="line">在能进入软件的前提下，直接将压缩包拖进软件就可以加载补丁了！一定要拖入右边的工作区，而不是左边项目结构区！  </span><br><span class="line">然后会重启idea，重启完成后点击安装按钮</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;软件包&quot;&gt;&lt;a href=&quot;#软件包&quot; class=&quot;headerlink&quot; title=&quot;软件包&quot;&gt;&lt;/a&gt;软件包&lt;/h1&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&quot;text-align:center&quot;&gt;软件名称&lt;/th&gt;
&lt;th styl
      
    
    </summary>
    
      <category term="破解" scheme="https://blog.soroke.top/categories/%E7%A0%B4%E8%A7%A3/"/>
    
    
      <category term="intellij激活" scheme="https://blog.soroke.top/tags/intellij%E6%BF%80%E6%B4%BB/"/>
    
      <category term="破解" scheme="https://blog.soroke.top/tags/%E7%A0%B4%E8%A7%A3/"/>
    
  </entry>
  
  <entry>
    <title>Harbor平台搭建安装</title>
    <link href="https://blog.soroke.top/2020/11/19/Harbor%E5%B9%B3%E5%8F%B0%E6%90%AD%E5%BB%BA%E5%AE%89%E8%A3%85/"/>
    <id>https://blog.soroke.top/2020/11/19/Harbor平台搭建安装/</id>
    <published>2020-11-19T13:02:39.000Z</published>
    <updated>2020-12-11T08:08:53.852Z</updated>
    
    <content type="html"><![CDATA[<h1 id="硬件要求"><a href="#硬件要求" class="headerlink" title="硬件要求"></a>硬件要求</h1><table><thead><tr><th style="text-align:left">硬件资源</th><th style="text-align:center">最低配置</th><th style="text-align:center">推荐配置</th></tr></thead><tbody><tr><td style="text-align:left">处理器</td><td style="text-align:center">2个CPU</td><td style="text-align:center">4个CPU</td></tr><tr><td style="text-align:left">内存</td><td style="text-align:center">4GB</td><td style="text-align:center">8GB</td></tr><tr><td style="text-align:left">磁盘</td><td style="text-align:center">40GB</td><td style="text-align:center">160GB</td></tr></tbody></table><h1 id="软件要求"><a href="#软件要求" class="headerlink" title="软件要求"></a>软件要求</h1><table><thead><tr><th style="text-align:left">软件资源</th><th style="text-align:center">版本</th></tr></thead><tbody><tr><td style="text-align:left">Docker engine</td><td style="text-align:center">v17.06.0-ce及以上</td></tr><tr><td style="text-align:left">Docker compose</td><td style="text-align:center">v1.18.0及以上</td></tr><tr><td style="text-align:left">openssl</td><td style="text-align:center">尽量使用最新版本</td></tr></tbody></table><a id="more"></a><h1 id="网络端口"><a href="#网络端口" class="headerlink" title="网络端口"></a>网络端口</h1><table><thead><tr><th style="text-align:left">端口</th><th style="text-align:center">协议</th></tr></thead><tbody><tr><td style="text-align:left">443</td><td style="text-align:center">https</td></tr><tr><td style="text-align:left">4443</td><td style="text-align:center">https</td></tr><tr><td style="text-align:left">80</td><td style="text-align:center">http</td></tr></tbody></table><hr><h1 id="下载地址"><a href="#下载地址" class="headerlink" title="下载地址"></a>下载地址</h1><p>Harbor官方分别提供了在线版（不含组件镜像，相对较小）和离线版（包含组件镜像，相对较大）。</p><p>下载offline包就行</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:&#x2F;&#x2F;github.com&#x2F;goharbor&#x2F;harbor&#x2F;releases</span><br></pre></td></tr></table></figure><hr><h1 id="创建自签名-https-证书"><a href="#创建自签名-https-证书" class="headerlink" title="创建自签名 https 证书"></a>创建自签名 https 证书</h1><h2 id="生成证书"><a href="#生成证书" class="headerlink" title="生成证书"></a>生成证书</h2><h3 id="创建证书目录，并赋予权限"><a href="#创建证书目录，并赋予权限" class="headerlink" title="创建证书目录，并赋予权限"></a>创建证书目录，并赋予权限</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> mkdir -p /data/cert &amp;&amp; chmod -R 777 /data/cert &amp;&amp; <span class="built_in">cd</span> /data/cert</span></span><br></pre></td></tr></table></figure><h3 id="创建CA根证书"><a href="#创建CA根证书" class="headerlink" title="创建CA根证书"></a>创建CA根证书</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> openssl req  -newkey rsa:4096 -nodes -sha256 -keyout ca.key -x509 -days 365 -out ca.crt -subj <span class="string">&quot;/C=CN/L=zhejiang/O=lisea/CN=harbor-registry&quot;</span></span></span><br></pre></td></tr></table></figure><h3 id="生成一个证书签名-假设设置访问域名为harbor-faxuan-net-自行替换域名"><a href="#生成一个证书签名-假设设置访问域名为harbor-faxuan-net-自行替换域名" class="headerlink" title="生成一个证书签名, 假设设置访问域名为harbor.faxuan.net(自行替换域名)"></a>生成一个证书签名, 假设设置访问域名为harbor.faxuan.net(自行替换域名)</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> openssl req -newkey rsa:4096 -nodes -sha256 -keyout harbor.faxuan.net.key -out server.csr -subj <span class="string">&quot;/C=CN/L=zhejiang/O=lisea/CN=harbor.faxuan.net&quot;</span></span></span><br></pre></td></tr></table></figure><h3 id="生成主机的证书-自行替换域名"><a href="#生成主机的证书-自行替换域名" class="headerlink" title="生成主机的证书(自行替换域名)"></a>生成主机的证书(自行替换域名)</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> openssl x509 -req -days 365 -<span class="keyword">in</span> server.csr -CA ca.crt -CAkey ca.key -CAcreateserial -out harbor.faxuan.net.crt</span></span><br></pre></td></tr></table></figure><h2 id="创建客户端使用证书"><a href="#创建客户端使用证书" class="headerlink" title="创建客户端使用证书"></a>创建客户端使用证书</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> mkdir harbor.faxuan.net</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> cp ca.crt harbor.faxuan.net &amp;&amp; cp harbor.faxuan.net.key harbor.faxuan.net &amp;&amp; cp harbor.faxuan.net.crt harbor.faxuan.net/harbor.faxuan.net.cert</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> tar -czvf harbor.faxuan.net.tar.gz harbor.faxuan.net</span></span><br></pre></td></tr></table></figure><p>执行完成后在当前目录下会生成一个harbor.faxuan.net.tar.gz文件，这个文件就是客户端需要使用的文件</p><hr><h1 id="部署安装"><a href="#部署安装" class="headerlink" title="部署安装"></a>部署安装</h1><h2 id="解压软件包"><a href="#解压软件包" class="headerlink" title="解压软件包"></a>解压软件包</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> tar -zxvf harbor-offline-installer-v2.1.0.tar.gz</span></span><br></pre></td></tr></table></figure><h2 id="修改配置"><a href="#修改配置" class="headerlink" title="修改配置"></a>修改配置</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> harbor</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> vim harbor.yml</span></span><br></pre></td></tr></table></figure><p>修改如下配置<br>hostname: harbor.faxuan.net  <strong>修改为自己的域名</strong><br>http:<br>  port: 80  </p><p>https:<br>  port: 443<br>  certificate: /data/cert/harbor.faxuan.net.crt  <strong>修改为自己的路径以及证书</strong><br>  private_key: /data/cert/harbor.faxuan.net.key  <strong>修改为自己的路径以及证书</strong>  </p><p>harbor_admin_password: Fxzx1234  <strong>管理员密码</strong></p><h2 id="执行安装"><a href="#执行安装" class="headerlink" title="执行安装"></a>执行安装</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> ./install.sh</span></span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line">[root@hub harbor]# .&#x2F;install.sh</span><br><span class="line"></span><br><span class="line">[Step 0]: checking if docker is installed ...</span><br><span class="line">Note: docker version: 19.03.8</span><br><span class="line"></span><br><span class="line">[Step 1]: checking docker-compose is installed ...</span><br><span class="line">Note: docker-compose version: 1.23.1</span><br><span class="line"></span><br><span class="line">[Step 2]: loading Harbor images ...</span><br><span class="line">Loaded image: goharbor&#x2F;clair-adapter-photon:v1.0.1-v1.10.1</span><br><span class="line">Loaded image: goharbor&#x2F;harbor-jobservice:v1.10.1</span><br><span class="line">Loaded image: goharbor&#x2F;redis-photon:v1.10.1</span><br><span class="line">Loaded image: goharbor&#x2F;notary-server-photon:v0.6.1-v1.10.1</span><br><span class="line">Loaded image: goharbor&#x2F;clair-photon:v2.1.1-v1.10.1</span><br><span class="line">Loaded image: goharbor&#x2F;harbor-log:v1.10.1</span><br><span class="line">Loaded image: goharbor&#x2F;registry-photon:v2.7.1-patch-2819-2553-v1.10.1</span><br><span class="line">Loaded image: goharbor&#x2F;notary-signer-photon:v0.6.1-v1.10.1</span><br><span class="line">Loaded image: goharbor&#x2F;chartmuseum-photon:v0.9.0-v1.10.1</span><br><span class="line">Loaded image: goharbor&#x2F;harbor-registryctl:v1.10.1</span><br><span class="line">Loaded image: goharbor&#x2F;nginx-photon:v1.10.1</span><br><span class="line">Loaded image: goharbor&#x2F;harbor-migrator:v1.10.1</span><br><span class="line">Loaded image: goharbor&#x2F;prepare:v1.10.1</span><br><span class="line">Loaded image: goharbor&#x2F;harbor-portal:v1.10.1</span><br><span class="line">Loaded image: goharbor&#x2F;harbor-core:v1.10.1</span><br><span class="line">Loaded image: goharbor&#x2F;harbor-db:v1.10.1</span><br><span class="line"></span><br><span class="line">[Step 3]: preparing environment ...</span><br><span class="line"></span><br><span class="line">[Step 4]: preparing harbor configs ...</span><br><span class="line">prepare base dir is set to &#x2F;root&#x2F;harbor</span><br><span class="line">Clearing the configuration file: &#x2F;config&#x2F;log&#x2F;logrotate.conf</span><br><span class="line">Clearing the configuration file: &#x2F;config&#x2F;log&#x2F;rsyslog_docker.conf</span><br><span class="line">Clearing the configuration file: &#x2F;config&#x2F;nginx&#x2F;conf.d&#x2F;notary.upstream.conf</span><br><span class="line">Clearing the configuration file: &#x2F;config&#x2F;nginx&#x2F;conf.d&#x2F;notary.server.conf</span><br><span class="line">Clearing the configuration file: &#x2F;config&#x2F;nginx&#x2F;nginx.conf</span><br><span class="line">Clearing the configuration file: &#x2F;config&#x2F;core&#x2F;env</span><br><span class="line">Clearing the configuration file: &#x2F;config&#x2F;core&#x2F;app.conf</span><br><span class="line">Clearing the configuration file: &#x2F;config&#x2F;registry&#x2F;config.yml</span><br><span class="line">Clearing the configuration file: &#x2F;config&#x2F;registry&#x2F;root.crt</span><br><span class="line">Clearing the configuration file: &#x2F;config&#x2F;registryctl&#x2F;env</span><br><span class="line">Clearing the configuration file: &#x2F;config&#x2F;registryctl&#x2F;config.yml</span><br><span class="line">Clearing the configuration file: &#x2F;config&#x2F;db&#x2F;env</span><br><span class="line">Clearing the configuration file: &#x2F;config&#x2F;jobservice&#x2F;env</span><br><span class="line">Clearing the configuration file: &#x2F;config&#x2F;jobservice&#x2F;config.yml</span><br><span class="line">Clearing the configuration file: &#x2F;config&#x2F;notary&#x2F;server-config.postgres.json</span><br><span class="line">Clearing the configuration file: &#x2F;config&#x2F;notary&#x2F;server_env</span><br><span class="line">Clearing the configuration file: &#x2F;config&#x2F;notary&#x2F;signer_env</span><br><span class="line">Clearing the configuration file: &#x2F;config&#x2F;notary&#x2F;signer-config.postgres.json</span><br><span class="line">Clearing the configuration file: &#x2F;config&#x2F;notary&#x2F;notary-signer.crt</span><br><span class="line">Clearing the configuration file: &#x2F;config&#x2F;notary&#x2F;notary-signer.key</span><br><span class="line">Clearing the configuration file: &#x2F;config&#x2F;notary&#x2F;notary-signer-ca.crt</span><br><span class="line">Clearing the configuration file: &#x2F;config&#x2F;notary&#x2F;root.crt</span><br><span class="line">Generated configuration file: &#x2F;config&#x2F;log&#x2F;logrotate.conf</span><br><span class="line">Generated configuration file: &#x2F;config&#x2F;log&#x2F;rsyslog_docker.conf</span><br><span class="line">Generated configuration file: &#x2F;config&#x2F;nginx&#x2F;nginx.conf</span><br><span class="line">Generated configuration file: &#x2F;config&#x2F;core&#x2F;env</span><br><span class="line">Generated configuration file: &#x2F;config&#x2F;core&#x2F;app.conf</span><br><span class="line">Generated configuration file: &#x2F;config&#x2F;registry&#x2F;config.yml</span><br><span class="line">Generated configuration file: &#x2F;config&#x2F;registryctl&#x2F;env</span><br><span class="line">Generated configuration file: &#x2F;config&#x2F;db&#x2F;env</span><br><span class="line">Generated configuration file: &#x2F;config&#x2F;jobservice&#x2F;env</span><br><span class="line">Generated configuration file: &#x2F;config&#x2F;jobservice&#x2F;config.yml</span><br><span class="line">loaded secret from file: &#x2F;secret&#x2F;keys&#x2F;secretkey</span><br><span class="line">Generated configuration file: &#x2F;compose_location&#x2F;docker-compose.yml</span><br><span class="line">Clean up the input dir</span><br><span class="line"></span><br><span class="line"># 如果已安装harbor将会自动移除</span><br><span class="line">Note: stopping existing Harbor instance ...</span><br><span class="line">Stopping nginx             ... done</span><br><span class="line">Stopping harbor-jobservice ... done</span><br><span class="line">Stopping harbor-core       ... done</span><br><span class="line">Stopping redis             ... done</span><br><span class="line">Stopping harbor-portal     ... done</span><br><span class="line">Stopping registry          ... done</span><br><span class="line">Stopping harbor-db         ... done</span><br><span class="line">Stopping harbor-log        ... done</span><br><span class="line">Removing nginx             ... done</span><br><span class="line">Removing harbor-jobservice ... done</span><br><span class="line">Removing harbor-core       ... done</span><br><span class="line">Removing redis             ... done</span><br><span class="line">Removing harbor-portal     ... done</span><br><span class="line">Removing registry          ... done</span><br><span class="line">Removing harbor-db         ... done</span><br><span class="line">Removing registryctl       ... done</span><br><span class="line">Removing harbor-log        ... done</span><br><span class="line">Removing network harbor_harbor</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[Step 5]: starting Harbor ...</span><br><span class="line">Creating network &quot;harbor_harbor&quot; with the default driver</span><br><span class="line">Creating harbor-log ... done</span><br><span class="line">Creating harbor-portal ... done</span><br><span class="line">Creating registry      ... done</span><br><span class="line">Creating redis         ... done</span><br><span class="line">Creating harbor-db     ... done</span><br><span class="line">Creating registryctl   ... done</span><br><span class="line">Creating harbor-core   ... done</span><br><span class="line">Creating harbor-jobservice ... done</span><br><span class="line">Creating nginx             ... done</span><br><span class="line">✔ ----Harbor has been installed and started successfully.----</span><br></pre></td></tr></table></figure><h1 id="客户端配置证书并登录"><a href="#客户端配置证书并登录" class="headerlink" title="客户端配置证书并登录"></a>客户端配置证书并登录</h1><h2 id="安装证书"><a href="#安装证书" class="headerlink" title="安装证书"></a>安装证书</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir &#x2F;etc&#x2F;docker&#x2F;certs.d&#x2F;</span><br><span class="line">$ cd &#x2F;etc&#x2F;docker&#x2F;certs.d&#x2F;</span><br><span class="line">$ rz -be harbor.faxuan.net.tar.gz  上传证书压缩包到当前目录(压缩包见步骤证书生成)</span><br><span class="line">$ tar -xvf harbor.faxuan.net.tar.gz</span><br><span class="line">$ systemctl restart docker</span><br></pre></td></tr></table></figure><h2 id="配置hosts"><a href="#配置hosts" class="headerlink" title="配置hosts"></a>配置hosts</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">echo</span> <span class="string">&quot;xx.xx.xx.xx harbor.faxuan.net&quot;</span> &gt;&gt; /etc/hosts</span></span><br></pre></td></tr></table></figure><h2 id="登录到harbor平台"><a href="#登录到harbor平台" class="headerlink" title="登录到harbor平台"></a>登录到harbor平台</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker login harbor.faxuan.net</span><br></pre></td></tr></table></figure><h2 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h2><p>生成镜像时 镜像名称需要指定为 harbor.faxuan.net/项目名称/镜像名称:version</p>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;硬件要求&quot;&gt;&lt;a href=&quot;#硬件要求&quot; class=&quot;headerlink&quot; title=&quot;硬件要求&quot;&gt;&lt;/a&gt;硬件要求&lt;/h1&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&quot;text-align:left&quot;&gt;硬件资源&lt;/th&gt;
&lt;th style=&quot;text-align:center&quot;&gt;最低配置&lt;/th&gt;
&lt;th style=&quot;text-align:center&quot;&gt;推荐配置&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left&quot;&gt;处理器&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;2个CPU&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;4个CPU&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left&quot;&gt;内存&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;4GB&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;8GB&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left&quot;&gt;磁盘&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;40GB&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;160GB&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h1 id=&quot;软件要求&quot;&gt;&lt;a href=&quot;#软件要求&quot; class=&quot;headerlink&quot; title=&quot;软件要求&quot;&gt;&lt;/a&gt;软件要求&lt;/h1&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&quot;text-align:left&quot;&gt;软件资源&lt;/th&gt;
&lt;th style=&quot;text-align:center&quot;&gt;版本&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left&quot;&gt;Docker engine&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;v17.06.0-ce及以上&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left&quot;&gt;Docker compose&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;v1.18.0及以上&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left&quot;&gt;openssl&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;尽量使用最新版本&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
    
    </summary>
    
      <category term="运维" scheme="https://blog.soroke.top/categories/%E8%BF%90%E7%BB%B4/"/>
    
      <category term="docker" scheme="https://blog.soroke.top/categories/%E8%BF%90%E7%BB%B4/docker/"/>
    
    
      <category term="docker" scheme="https://blog.soroke.top/tags/docker/"/>
    
      <category term="harbor" scheme="https://blog.soroke.top/tags/harbor/"/>
    
  </entry>
  
  <entry>
    <title>使用docker和docker-compose启动Jenkins</title>
    <link href="https://blog.soroke.top/2020/11/18/%E4%BD%BF%E7%94%A8docker%E5%92%8Cdocker-compose%E5%90%AF%E5%8A%A8Jenkins/"/>
    <id>https://blog.soroke.top/2020/11/18/使用docker和docker-compose启动Jenkins/</id>
    <published>2020-11-18T14:04:55.000Z</published>
    <updated>2020-12-11T08:07:30.861Z</updated>
    
    <content type="html"><![CDATA[<h2 id="基础环境"><a href="#基础环境" class="headerlink" title="基础环境"></a>基础环境</h2><p>所需软件如下<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">jdk</span><br><span class="line">docker</span><br><span class="line">docker-compose</span><br></pre></td></tr></table></figure></p><h2 id="yml文件配置"><a href="#yml文件配置" class="headerlink" title="yml文件配置"></a>yml文件配置</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">jenkins:</span><br><span class="line">    image: jenkins&#x2F;jenkins:lts</span><br><span class="line">    volumes:</span><br><span class="line">        - .&#x2F;jenkins_home&#x2F;:&#x2F;var&#x2F;jenkins_home</span><br><span class="line">        - &#x2F;var&#x2F;run&#x2F;docker.sock:&#x2F;var&#x2F;run&#x2F;docker.sock</span><br><span class="line">        - &#x2F;usr&#x2F;bin&#x2F;docker:&#x2F;usr&#x2F;bin&#x2F;docker</span><br><span class="line">        - &#x2F;usr&#x2F;lib64&#x2F;libltdl.so.7:&#x2F;usr&#x2F;lib64&#x2F;libltdl.so.7</span><br><span class="line">        - &#x2F;usr&#x2F;local&#x2F;bin&#x2F;docker-compose:&#x2F;usr&#x2F;local&#x2F;bin&#x2F;docker-compose</span><br><span class="line">    ports:</span><br><span class="line">        - &quot;80:8080&quot;</span><br><span class="line">        - &quot;50000:50000&quot;</span><br><span class="line">    privileged: true</span><br><span class="line">    user: root</span><br><span class="line">    restart: always</span><br><span class="line">    container_name: Jenkins</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="启动jenkins"><a href="#启动jenkins" class="headerlink" title="启动jenkins"></a>启动jenkins</h2><p> 将第二步中的yaml文件放在指定目录下，然后进入该文件夹，启动服务<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker-compose up -d</span><br></pre></td></tr></table></figure></p><h2 id="访问并安装插件"><a href="#访问并安装插件" class="headerlink" title="访问并安装插件"></a>访问并安装插件</h2><p>访问本机<a href="http://localhost:80">http://localhost:80</a></p><p>首次访问需要密码，查看默认生成密码：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ cat jenkins_home/secrets/initialAdminPassword</span><br></pre></td></tr></table></figure><h2 id="解决问题"><a href="#解决问题" class="headerlink" title="解决问题"></a>解决问题</h2><h3 id="一直卡在启动页面"><a href="#一直卡在启动页面" class="headerlink" title="一直卡在启动页面"></a>一直卡在启动页面</h3><p>修改文件：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ vim jenkins_home/hudson.model.UpdateCenter.xml</span><br></pre></td></tr></table></figure><br>将<a href="https://updates.jenkins.io/update-center.json">https://updates.jenkins.io/update-center.json</a></p><p>修改为 <a href="https://mirrors.tuna.tsinghua.edu.cn/jenkins/updates/update-center.json">https://mirrors.tuna.tsinghua.edu.cn/jenkins/updates/update-center.json</a></p><p>然后重启服务</p><hr><h3 id="Jenkins离线"><a href="#Jenkins离线" class="headerlink" title="Jenkins离线"></a>Jenkins离线</h3><p>修改文件<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ vim jenkins_home/updates/default.json</span><br></pre></td></tr></table></figure><br>修改第一行的”connectionCheckUrl”:<a href="http://www.google.com/“">http://www.google.com/“</a></p><p>改为：”connectionCheckUrl”:<a href="http://www.baidu.com/“">http://www.baidu.com/“</a></p><p>然后重启服务</p><hr><h3 id="安装完成后，空白页面"><a href="#安装完成后，空白页面" class="headerlink" title="安装完成后，空白页面"></a>安装完成后，空白页面</h3><p>重启服务<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker-compose restart</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;基础环境&quot;&gt;&lt;a href=&quot;#基础环境&quot; class=&quot;headerlink&quot; title=&quot;基础环境&quot;&gt;&lt;/a&gt;基础环境&lt;/h2&gt;&lt;p&gt;所需软件如下&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;jdk&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;docker&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;docker-compose&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&quot;yml文件配置&quot;&gt;&lt;a href=&quot;#yml文件配置&quot; class=&quot;headerlink&quot; title=&quot;yml文件配置&quot;&gt;&lt;/a&gt;yml文件配置&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;jenkins:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    image: jenkins&amp;#x2F;jenkins:lts&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    volumes:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        - .&amp;#x2F;jenkins_home&amp;#x2F;:&amp;#x2F;var&amp;#x2F;jenkins_home&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        - &amp;#x2F;var&amp;#x2F;run&amp;#x2F;docker.sock:&amp;#x2F;var&amp;#x2F;run&amp;#x2F;docker.sock&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        - &amp;#x2F;usr&amp;#x2F;bin&amp;#x2F;docker:&amp;#x2F;usr&amp;#x2F;bin&amp;#x2F;docker&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        - &amp;#x2F;usr&amp;#x2F;lib64&amp;#x2F;libltdl.so.7:&amp;#x2F;usr&amp;#x2F;lib64&amp;#x2F;libltdl.so.7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        - &amp;#x2F;usr&amp;#x2F;local&amp;#x2F;bin&amp;#x2F;docker-compose:&amp;#x2F;usr&amp;#x2F;local&amp;#x2F;bin&amp;#x2F;docker-compose&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ports:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        - &amp;quot;80:8080&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        - &amp;quot;50000:50000&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    privileged: true&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    user: root&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    restart: always&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    container_name: Jenkins&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="运维" scheme="https://blog.soroke.top/categories/%E8%BF%90%E7%BB%B4/"/>
    
    
      <category term="docker" scheme="https://blog.soroke.top/tags/docker/"/>
    
      <category term="Jenkins" scheme="https://blog.soroke.top/tags/Jenkins/"/>
    
  </entry>
  
</feed>
